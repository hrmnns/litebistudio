import{u as jl,d as yl,a as C,S as _,e as Ye,b as y,j as e,P as Sl,M as Cl}from"./index-BvycqZXQ.js";import{u as ql,h as El,r,d as F}from"./vendor-react-D64xOC9_.js";import{D as Tl}from"./DataTable-BwpHDMvW.js";import{R as Il}from"./RecordDetailModal-D89FoC7w.js";import{u as ra,w as Ll}from"./xlsx-BojT3SgY.js";import{I as na,a as oa,b as vs}from"./inspectorBridge-BnIEasIL.js";import{D as _s,g as ws,V as Ae,P as mt,a2 as ia,O as Rl,a3 as da,x as $l,a4 as Al,w as Ol,a1 as Ml,m as Dl,a5 as Fl,a6 as pt,z as Pl,a7 as te,a8 as Ul,u as Wl,K as Ns,a9 as js,aa as ys,ab as Hl,$ as Bl,ac as Vl,a0 as zl}from"./vendor-icons-Du2dXQHa.js";import"./vendor-pdf-FXkUb51H.js";import"./vendor-ui-BNe0Xlio.js";import"./vendor-charts-BtQqxQq4.js";import"./SchemaDocumentation-BzvVq15F.js";const Ql=(ht,w,Ke="Sheet1")=>{const gt=ra.json_to_sheet(ht),a=ra.book_new();ra.book_append_sheet(a,gt,Ke);const ft=w.endsWith(".xlsx")?w:`${w}.xlsx`;Ll(a,ft)},Gl=["SELECT","FROM","WHERE","GROUP BY","ORDER BY","HAVING","LIMIT","OFFSET","JOIN","LEFT JOIN","RIGHT JOIN","INNER JOIN","ON","AND","OR","NOT","IN","LIKE","IS NULL","IS NOT NULL","COUNT(*)","SUM()","AVG()","MIN()","MAX()","DISTINCT"],or=({onBack:ht,fixedMode:w,titleKey:Ke,breadcrumbKey:gt})=>{const{t:a,i18n:ft}=jl(),kt=ql(),Je=El(),{isAdminMode:vt}=yl(),Y="global",Xe="data_inspector_sql_library_migrated_v1",Ss=w==="sql"?"sql_workspace_sql_editor_height":"data_inspector_sql_editor_height",[c,V]=r.useState(w??"table"),[S,P]=r.useState(""),[ca,_t]=C("data_inspector_sql_history",[]),[xa]=C("data_inspector_explain_mode",!1),[Cs,ie]=C("data_inspector_sql_assist_open",!0),[M,qs]=C("data_inspector_autocomplete_enabled",!0),[ua]=C("data_inspector_sql_require_limit_confirm",!0),[wt]=C("data_inspector_sql_max_rows",5e3),[D,Es]=r.useState([]),[Nt,Ts]=r.useState(""),[Is,Ls]=C("data_inspector_last_saved_sql_template_name",""),[jt,ba]=r.useState("manager"),[yt,ae]=C("data_inspector_table_tools_open",!1),[de,Oe]=C("data_inspector_table_tools_tab_v1","columns"),[ce,Me]=r.useState([]),[we,ma]=r.useState([]),[Ne,St]=r.useState(""),[Ct,pa]=r.useState(""),[K,ha]=C("data_inspector_sql_manager_panels_v1",{templates:!0,manager:!0,recent:!0}),[R,ga]=C("data_inspector_sql_assistant_panels_v1",{table:!0,columns:!0,aggregation:!0,grouping:!0,filter:!0,sorting:!0,preview:!0}),[J,fa]=r.useState(""),[Ze,De]=r.useState([]),[qt,ka]=r.useState(""),[Et,va]=r.useState("AND"),[Tt,_a]=r.useState(""),[et,je]=r.useState([{id:"f0",connector:"AND",column:"",operator:"=",value:""}]),[tt,ye]=r.useState([{id:"s0",column:"",direction:"DESC"}]),[It,wa]=r.useState(100),[E,Na]=r.useState("none"),[xe,Fe]=r.useState(""),[Lt,Rt]=r.useState([]),[z,ja]=r.useState("metric_value"),[Se,at]=r.useState([]),[ya,st]=r.useState(""),[Rs,$t]=r.useState(!1),[se,U]=r.useState(xa?"explain":"result"),[At,$s]=r.useState(""),[Sa,Ca]=r.useState(""),[As,lt]=r.useState(!1),[qa,Ea]=r.useState(""),[Ce,Ot]=r.useState([]),[Mt,Ta]=r.useState(!1),[Dt,Ia]=r.useState(""),[rt,La]=r.useState(!1),[Ra,nt]=r.useState([]),[$a,Aa]=r.useState(!1),[Oa,Ma]=r.useState(""),[Pe,Da]=C(Ss,160),[ge,Ft]=r.useState(Pe),qe=r.useRef(null),[ue,Q]=r.useState(0),[Ee,Ue]=r.useState(!1),[Pt,ot]=r.useState(0),[Ut,Os]=r.useState({top:12,left:12,width:320}),Fa=r.useRef(new Map),be=r.useRef(0),[fe,We]=r.useState(""),[i,Wt]=r.useState(""),[Ht,Pa]=r.useState(null),[Te,Ms]=C("data_inspector_page_size",100),[He,Ie]=r.useState(1),[Ua,Wa]=r.useState(""),Ds=(He-1)*Te,[L,Be]=r.useState(null),[me,Le]=r.useState({}),[Bt]=C("data_table_default_show_filters",!1),[Vt,le]=r.useState(Bt),[Ha,Ba]=C("data_inspector_column_widths_v1",{}),[zt,Va]=C("data_inspector_saved_views",[]),[re,it]=C("data_inspector_active_view",""),[Fs]=C("data_inspector_show_profiling",!0),[X,za]=r.useState(Fs?"profiling":"data"),[ke,Qt]=C("data_inspector_profiling_thresholds",{nullRate:30,cardinalityRate:95}),[Gt,Qa]=r.useState(!1),Yt=r.useRef(null),Kt=r.useRef(ge),Ps=r.useRef(0),[Ga,Us]=r.useState(null),Ya=!!w,Ws=a(Ke||"sidebar.data_inspector"),Hs=a(gt||Ke||"sidebar.data_inspector"),W=r.useCallback(t=>{const s=t.trim();s&&(localStorage.setItem(na,s),localStorage.setItem(oa,`#${Je.pathname}${Je.search||""}`),kt("/sql-workspace"))},[Je.pathname,Je.search,kt]);r.useEffect(()=>{le(Bt)},[Bt,i]),r.useEffect(()=>{!w||c===w||V(w)},[w,c]),r.useEffect(()=>{const t=localStorage.getItem(na),s=localStorage.getItem(oa);if(s){const l=s.startsWith("#/")?s:"#/";Us(l),localStorage.removeItem(oa)}if(t){if(localStorage.removeItem(na),w==="table"){W(t);return}V("sql"),P(t),U("result")}},[w,W]),r.useEffect(()=>{if(w!=="sql"||S.trim())return;const t=localStorage.getItem(vs);!t||!/^\s*SELECT\b/i.test(t)||(P(t),Q(t.length),U("result"))},[w,S]);const Z=r.useCallback(t=>t.trim().replace(/\s+/g," ").toLowerCase(),[]),$=r.useCallback(async()=>{const t=await _.listSqlStatements(Y);Es(t)},[Y]);r.useEffect(()=>{$()},[$]),r.useEffect(()=>{(async()=>{if(localStorage.getItem(Xe)!=="true")try{const l=await _.listSqlStatements(Y),n=new Set(l.map(p=>Z(p.sql_text))),o=localStorage.getItem("data_inspector_custom_sql_templates"),d=localStorage.getItem("data_inspector_favorite_queries"),x=o?JSON.parse(o):[],m=d?JSON.parse(d):[];for(const p of x){const k=(p.sql||"").trim();if(!k)continue;const T=Z(k);n.has(T)||(await _.saveSqlStatement({id:crypto.randomUUID(),name:(p.name||a("datainspector.save_template")).trim()||`Template ${n.size+1}`,sql_text:k,scope:Y}),n.add(T))}for(const p of m){const k=p.trim();if(!k)continue;const T=Z(k);if(n.has(T))continue;const h=k.split(`
`).map(I=>I.trim()).find(Boolean)||k;await _.saveSqlStatement({id:crypto.randomUUID(),name:`${a("datainspector.favorite_queries")}: ${h.slice(0,36)}`,sql_text:k,scope:Y,is_favorite:!0}),n.add(T)}localStorage.setItem(Xe,"true"),await $()}catch{localStorage.setItem(Xe,"true")}})()},[Xe,Y,$,Z,a]);const{data:Ve}=Ye(async()=>{const t=await _.getDataSources(),s=vt?t:t.filter(l=>!l.name.startsWith("sys_"));return s.length>0&&(!i||i.startsWith("sys_")&&!vt)&&Wt(s[0].name),s},[vt]),pe=F.useMemo(()=>(Ve||[]).map(t=>t.name),[Ve]),ee=F.useMemo(()=>Ve?.find(t=>t.name===i)?.type??"table",[Ve,i]),Bs=F.useMemo(()=>i?Ha[i]||{}:{},[Ha,i]),Vs=r.useCallback(t=>{i&&Ba(s=>({...s,[i]:t}))},[i,Ba]),{data:v,loading:ve,error:Ka,refresh:H}=Ye(async()=>c==="table"?i?await _.inspectTable(i,Te,fe,Ds,ee):[]:At?await _.executeRaw(At):[],[c,i,ee,Te,He,At]),{data:Ja}=Ye(async()=>c!=="table"||!i?0:await _.countTableRows(i,fe),[c,i,fe]),dt=Math.max(1,Math.ceil((Ja||0)/Te)),{data:A}=Ye(async()=>i?await _.getTableSchema(i):[],[i]),{data:ct}=Ye(async()=>J?await _.getTableSchema(J):[],[J]);r.useEffect(()=>{const t=(A||[]).map(s=>s.name);if(t.length===0){St("");return}(!Ne||!t.includes(Ne))&&St(t[0])},[A,Ne]),r.useEffect(()=>{const t=(A||[]).map(s=>s.name);Me(s=>s.filter(l=>t.includes(l)))},[A]);const Jt=F.useMemo(()=>{const t=v&&v.length>0?Object.keys(v[0]).filter(s=>s!=="_rowid"):[];return we.length>0?t.filter(s=>we.includes(s)):t},[v,we]);r.useEffect(()=>{c!=="table"||!yt||de!=="columns"||Jt.length!==0&&Me(Jt)},[Jt,c,yt,de]),r.useEffect(()=>{ma([])},[i]),r.useEffect(()=>{if(c==="table"){const t=setTimeout(()=>{H()},500);return()=>clearTimeout(t)}},[fe,c,H]);const ne=r.useCallback(async t=>{const s=t.trim();if(!s)return;const l=s.toUpperCase();if(/^(INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|REPLACE|TRUNCATE|VACUUM|ATTACH|DETACH)\b/.test(l)&&!await y.confirm(a("datainspector.write_confirm")))return;const o=/^\s*SELECT\b/i.test(s),d=/\bLIMIT\b/i.test(s);if(o&&!d&&ua&&!await y.confirm(a("datainspector.limit_confirm_prompt",{limit:wt})))return;let x=s.replace(/;\s*$/,"");if(o){const m=Math.max(1,Math.floor(wt||1));x=`SELECT * FROM (${x}) AS __litebi_guard LIMIT ${m}`,Ca(a("datainspector.limit_applied_notice",{limit:m}))}else Ca("");U("result"),$s(x),H(),_t(m=>[s,...m.filter(p=>p!==s)].slice(0,12)),o&&localStorage.setItem(vs,s)},[H,_t,wt,ua,a]),zs=async()=>{await ne(S)},Qs=async()=>{await _.abortActiveQueries()||await y.info(a("datainspector.cancel_not_available","No cancellable SQL query is currently running in this tab."))},Xa=r.useCallback(async t=>{const s=t.trim();if(!s){at([]),st("");return}$t(!0),st("");try{const l=await _.executeRaw(`EXPLAIN QUERY PLAN ${s}`);at(l)}catch(l){at([]),st(l instanceof Error?l.message:String(l))}finally{$t(!1)}},[]),Gs=async t=>{const s=t.trim();if(!s)return;const l=Z(s),n=D.find(d=>Z(d.sql_text)===l);if(n){await _.setSqlStatementFavorite(n.id,Number(n.is_favorite)!==1),await $();return}const o=s.split(`
`).map(d=>d.trim()).find(Boolean)||s;await _.saveSqlStatement({id:crypto.randomUUID(),name:o.slice(0,42),sql_text:s,scope:Y,is_favorite:!0}),await $()},Ys=async()=>{const t=S.trim();if(!t)return;const s=Z(t),l=D.find(k=>k.scope===Y&&Z(k.sql_text)===s),n=l?.name||Is||`${i||"Query"} Template`,o=l?a("datainspector.custom_template_prompt_update","Template name (updates existing):"):a("datainspector.custom_template_prompt"),d=(await y.prompt(o,{defaultValue:n}))?.trim();if(!d)return;const x=D.find(k=>k.name.toLowerCase()===d.toLowerCase()&&k.scope===Y);if(x&&l&&x.id!==l.id){if(!await y.confirm(a("datainspector.custom_template_overwrite_confirm",{name:d})))return;await _.deleteSqlStatement(x.id)}else if(x&&!l&&!await y.confirm(a("datainspector.custom_template_overwrite_confirm",{name:d})))return;const m=l?.id||x?.id||crypto.randomUUID(),p=l?Number(l.is_favorite)===1:x?Number(x.is_favorite)===1:!1;await _.saveSqlStatement({id:m,name:d,sql_text:t,scope:Y,is_favorite:p}),Ls(d),await $()},Ks=t=>{Wt(t.table),We(t.searchTerm),Be(t.sortConfig),Le(t.filters||{}),le(!!t.showFilters),Ya||V("table")},Za=async()=>{const t=zt.find(n=>n.id===re)?.name||`${i} View`,s=(await y.prompt(a("datainspector.new_view_prompt"),{defaultValue:t}))?.trim();if(!s)return;const l={id:re||crypto.randomUUID(),name:s,table:i,searchTerm:fe,sortConfig:L,filters:me,showFilters:Vt};Va(n=>{const o=n.filter(d=>d.id!==l.id);return[l,...o].slice(0,20)}),it(l.id)},es=async()=>{re&&await y.confirm(a("datainspector.delete_view_confirm"))&&(Va(t=>t.filter(s=>s.id!==re)),it(""))},O=r.useCallback(t=>`"${t.replace(/"/g,'""')}"`,[]),ts=()=>{!i||ee!=="table"||(Ea(`idx_${i}_`),Ot([]),Ta(!1),Ia(""),lt(!0))},Js=t=>{Ot(s=>s.includes(t)?s.filter(l=>l!==t):[...s,t])},as=(t,s)=>{Ot(l=>{const n=l.indexOf(t);if(n===-1)return l;const o=s==="up"?n-1:n+1;if(o<0||o>=l.length)return l;const d=[...l];return[d[n],d[o]]=[d[o],d[n]],d})},Xs=async()=>{const t=qa.trim();if(!(!i||ee!=="table")){if(!t){await y.warning(a("datasource.index_create_name_required","Please provide an index name."));return}if(Ce.length===0){await y.warning(a("datasource.index_create_columns_required","Please select at least one column."));return}La(!0);try{const s=Mt?"UNIQUE ":"",l=Ce.map(O).join(", "),n=Dt.trim()?` WHERE ${Dt.trim()}`:"",o=`CREATE ${s}INDEX ${O(t)} ON ${O(i)} (${l})${n};`;await _.executeRaw(o),lt(!1),H(),await y.info(a("datasource.index_create_success","Index created."))}catch(s){await y.error(a("common.error")+": "+(s instanceof Error?s.message:String(s)))}finally{La(!1)}}},ss=r.useCallback((t,s)=>`idx_${t}_${s.join("_")}`.toLowerCase().replace(/[^a-z0-9_]/g,"_").slice(0,60),[]),ls=r.useCallback(async t=>{const s=O(t),n=(await _.executeRaw(`PRAGMA index_list(${s});`)).map(d=>String(d.name??"")).filter(Boolean),o=[];for(const d of n){const m=(await _.executeRaw(`PRAGMA index_info(${O(d)});`)).map(p=>String(p.name??"")).filter(Boolean);m.length>0&&o.push(m)}return o},[O]),Zs=r.useCallback(async()=>{if(!i||ee!=="table")return;const t=JSON.stringify({table:i,filters:me,sortKey:L?.key?String(L.key):"",sortDir:L?.direction||"",schema:(A||[]).map(n=>n.name)}),s=Fa.current.get(t);if(s){nt(s);return}const l=++be.current;Aa(!0);try{const n=(A||[]).map(u=>u.name);if(l!==be.current)return;if(n.length===0){nt([]);return}const o=await ls(i);if(l!==be.current)return;const d=await _.executeRaw(`SELECT COUNT(*) AS total_rows FROM ${O(i)};`);if(l!==be.current)return;const x=Number(d[0]?.total_rows??0),m=n.slice(0,14),p=Math.max(1,Math.min(x||1,5e3)),k=await Promise.all(m.map(async u=>{const g=await _.executeRaw(`SELECT COUNT(DISTINCT ${O(u)}) AS distinct_count
                     FROM (SELECT ${O(u)} FROM ${O(i)} LIMIT ${p});`),f=Number(g[0]?.distinct_count??0),j=p>0?p:x,G=j>0?f/j:0;return{column:u,distinctCount:f,ratio:G}}));if(l!==be.current)return;const T=[],h=new Set,I=(u,g,f)=>{const j=u.filter(Boolean);if(j.length===0)return;const G=j.join("|").toLowerCase();h.has(G)||(h.add(G),T.push({columns:j,reason:g,score:f}))},N=Object.keys(me).filter(u=>n.includes(u));if(N.forEach((u,g)=>{I([u],a("datainspector.index_suggestion_reason_filter","Used in active table filter"),95-g)}),L?.key&&n.includes(String(L.key))&&I([String(L.key)],a("datainspector.index_suggestion_reason_sort","Used as active sort column"),92),N.length>1)I(N.slice(0,2),a("datainspector.index_suggestion_reason_composite","Composite index for combined filters"),96);else if(N.length===1&&L?.key&&n.includes(String(L.key))){const u=String(L.key);u!==N[0]&&I([N[0],u],a("datainspector.index_suggestion_reason_filter_sort","Composite index for filter + sort"),97)}k.sort((u,g)=>g.ratio-u.ratio).slice(0,3).forEach((u,g)=>{u.ratio<.08||I([u.column],a("datainspector.index_suggestion_reason_cardinality","High cardinality column"),86-g)});const oe=u=>o.some(g=>g.length>=u.length&&u.every((f,j)=>g[j]===f)),$e=T.filter(u=>!oe(u.columns)).sort((u,g)=>g.score-u.score).slice(0,5).map(u=>{const g=ss(i,u.columns),f=u.columns.map(j=>O(j)).join(", ");return{id:`${i}:${u.columns.join("|")}`,indexName:g,columns:u.columns,reason:u.reason,score:u.score,sql:`CREATE INDEX ${O(g)} ON ${O(i)} (${f});`}});nt($e),Fa.current.set(t,$e)}catch(n){if(l!==be.current)return;await y.error(a("common.error")+": "+(n instanceof Error?n.message:String(n)))}finally{l===be.current&&Aa(!1)}},[ss,ls,O,ee,i,A,me,L,a]);r.useEffect(()=>{be.current+=1},[i,me,L]);const el=r.useCallback(async t=>{Ma(t.id);try{await _.executeRaw(t.sql),await y.info(a("datasource.index_create_success","Index created.")),nt(s=>s.filter(l=>l.id!==t.id)),H()}catch(s){await y.error(a("common.error")+": "+(s instanceof Error?s.message:String(s)))}finally{Ma("")}},[H,a]),tl=F.useMemo(()=>{if(!v||v.length===0)return[];const t=Object.keys(v[0]).filter(l=>l!=="_rowid"),s=we.length>0?t.filter(l=>we.includes(l)):t;return s.length===0?[]:s.map(l=>{const n=l.toLowerCase().includes("amount")||l.toLowerCase().includes("price"),o=l.toLowerCase().includes("id"),x=typeof v[0][l]=="number";return{header:l,accessor:l,align:x?"right":"left",className:o?"font-mono text-[10px] text-slate-400":l==="Period"||l==="PostingDate"?"font-mono":"",render:n?m=>e.jsx("span",{className:Number(m[l]??0)<0?"text-red-500":"text-slate-900 dark:text-slate-100",children:new Intl.NumberFormat("de-DE",{style:"currency",currency:m.Currency||"EUR"}).format(m[l]||0)}):void 0}})},[v,we]),rs=ft.language.startsWith("de")?"de-DE":"en-US",ns=new Date,al=`${a("common.loading").replace("...","")} ${ns.toLocaleDateString(rs)}, ${ns.toLocaleTimeString(rs,{hour:"2-digit",minute:"2-digit"})}`;r.useEffect(()=>{c!=="sql"&&(at([]),st(""),$t(!1))},[c]),r.useEffect(()=>{if(c!=="sql"||se!=="explain")return;const t=window.setTimeout(()=>{Xa(S)},250);return()=>window.clearTimeout(t)},[c,se,S,Xa]);const os=[{key:"top10",sql:`SELECT * FROM ${i||"table_name"} LIMIT 10`},{key:"count",sql:`SELECT COUNT(*) AS total_rows FROM ${i||"table_name"}`},{key:"nullscan",sql:`SELECT * FROM ${i||"table_name"} WHERE 1=1 LIMIT 50`},{key:"duplicates",sql:`SELECT key_column, COUNT(*) AS cnt FROM ${i||"table_name"} GROUP BY key_column HAVING COUNT(*) > 1 ORDER BY cnt DESC LIMIT 50`},{key:"outliers",sql:`SELECT * FROM ${i||"table_name"} WHERE value_column IS NOT NULL ORDER BY value_column DESC LIMIT 25`}];r.useEffect(()=>{pe.length&&(!J||!pe.includes(J))&&fa(i&&pe.includes(i)?i:pe[0])},[J,i,pe]);const q=F.useMemo(()=>(ct||[]).map(t=>t.name),[ct]),Xt=F.useMemo(()=>(ct||[]).filter(t=>/int|real|num|dec|float|double/i.test(t.type||"")).map(t=>t.name),[ct]),is=F.useMemo(()=>{const t=Tt.trim().toLowerCase();return t?q.filter(s=>s.toLowerCase().includes(t)):q},[Tt,q]),ds=E!=="none";r.useEffect(()=>{De(t=>t.filter(s=>q.includes(s))),E!=="none"&&E!=="count"&&xe&&!q.includes(xe)&&Fe(""),Rt(t=>t.filter(s=>q.includes(s))),je(t=>t.map(s=>s.column&&!q.includes(s.column)?{...s,column:""}:s)),ye(t=>t.map(s=>s.column&&!q.includes(s.column)&&s.column!==z?{...s,column:""}:s))},[E,xe,q,z]),r.useEffect(()=>{E==="none"||E==="count"||xe||(Xt.length>0?Fe(Xt[0]):q.length>0&&Fe(q[0]))},[E,xe,q,Xt]);const sl=r.useCallback(()=>{De([]),_a(""),je([{id:"f0",connector:"AND",column:"",operator:"=",value:""}]),ka(""),va("AND"),ye([{id:"s0",column:"",direction:"DESC"}]),wa(100),Na("none"),Fe(""),Rt([]),ja("metric_value")},[]),ll=r.useCallback(()=>{const t=`f_${Date.now()}_${Math.random().toString(36).slice(2,7)}`;je(s=>[...s,{id:t,connector:"AND",column:"",operator:"=",value:""}])},[]),xt=r.useCallback((t,s)=>{je(l=>l.map(n=>n.id===t?{...n,...s}:n))},[]),rl=r.useCallback(t=>{je(s=>{const l=s.filter(n=>n.id!==t);return l.length>0?l:[{id:"f0",connector:"AND",column:"",operator:"=",value:""}]})},[]),cs=r.useCallback((t,s)=>{je(l=>{const n=l.findIndex(m=>m.id===t);if(n<0)return l;const o=s==="up"?n-1:n+1;if(o<0||o>=l.length)return l;const d=[...l],[x]=d.splice(n,1);return d.splice(o,0,x),d})},[]),nl=r.useCallback(()=>{const t=`s_${Date.now()}_${Math.random().toString(36).slice(2,7)}`;ye(s=>[...s,{id:t,column:"",direction:"DESC"}])},[]),xs=r.useCallback((t,s)=>{ye(l=>l.map(n=>n.id===t?{...n,...s}:n))},[]),ol=r.useCallback(t=>{ye(s=>{const l=s.filter(n=>n.id!==t);return l.length>0?l:[{id:"s0",column:"",direction:"DESC"}]})},[]),us=r.useCallback((t,s)=>{ye(l=>{const n=l.findIndex(m=>m.id===t);if(n<0)return l;const o=s==="up"?n-1:n+1;if(o<0||o>=l.length)return l;const d=[...l],[x]=d.splice(n,1);return d.splice(o,0,x),d})},[]),Zt=r.useCallback(()=>{if(!J)return"";const t=g=>`"${g.replace(/"/g,'""')}"`,s=g=>{const f=g.trim();return f?/^'.*'$|^".*"$/.test(f)||/^-?\d+(\.\d+)?$/.test(f)?f:`'${f.replace(/'/g,"''")}'`:""},l=`FROM ${t(J)}`,n=E.toUpperCase(),o=E==="count"?`COUNT(*) AS ${t(z||"metric_value")}`:`${n}(${t(xe)}) AS ${t(z||"metric_value")}`;let d="SELECT *";const x=[];if(E==="none")d=`SELECT ${Ze.length>0?Ze.map(t).join(", "):"*"}`;else{const g=Lt.map(t);x.push(...g),d=`SELECT ${[...g,o].join(", ")}`}const m=et.map(f=>{if(!f.column.trim()||!f.operator.trim())return null;const j=t(f.column.trim());if(f.operator==="IS NULL"||f.operator==="IS NOT NULL")return{connector:f.connector,expr:`${j} ${f.operator}`};const G=s(f.value);return G?{connector:f.connector,expr:`${j} ${f.operator} ${G}`}:null}).filter(f=>!!f).reduce((f,j,G)=>G===0?j.expr:`${f} ${j.connector} ${j.expr}`,""),p=qt.trim(),k=m&&p?`WHERE (${m}) ${Et} (${p})`:m?`WHERE ${m}`:p?`WHERE ${p}`:"",T=x.length>0?`GROUP BY ${x.join(", ")}`:"",h=tt.filter(g=>g.column.trim()).map(g=>`${g.column===z?t(z||"metric_value"):t(g.column)} ${g.direction}`),I=E!=="none"?[`${t(z||"metric_value")} DESC`]:[],N=h.length>0?h:I,oe=N.length>0?`ORDER BY ${N.join(", ")}`:"",u=`LIMIT ${Math.max(1,Math.min(1e5,Math.floor(Number(It)||100)))}`;return[d,l,k,T,oe,u].filter(Boolean).join(`
`)},[E,xe,et,Lt,It,z,tt,Ze,J,Et,qt])(),bs=r.useCallback(async t=>{const s=Zt.trim();if(s){if(w==="table"){W(s);return}V("sql"),P(s),Q(s.length),U("result"),ie(!1),t==="run"&&await ne(s)}},[Zt,ne,w,W,ie]),il=Z(S),ms=D.find(t=>Z(t.sql_text)===il),ut=!!(ms&&Number(ms.is_favorite)===1),ps=F.useMemo(()=>{const t=Nt.trim().toLowerCase();return t?D.filter(s=>s.name.toLowerCase().includes(t)||s.sql_text.toLowerCase().includes(t)||(s.description||"").toLowerCase().includes(t)):D},[Nt,D]),dl=F.useMemo(()=>D.filter(t=>Number(t.is_favorite)===1).length,[D]),hs=r.useCallback(async(t,s)=>{if(w==="table"){W(t.sql_text);return}V("sql"),P(t.sql_text),Q(t.sql_text.length),U("result"),ie(!1),await _.markSqlStatementUsed(t.id),s&&await ne(t.sql_text),await $()},[ne,w,W,$,ie]),gs=r.useCallback(async(t,s)=>{if(w==="table"){W(t);return}V("sql"),P(t),Q(t.length),U("result"),ie(!1),s&&await ne(t)},[ne,w,W,ie]),ea=r.useCallback(t=>{ha(s=>({...s,[t]:!s[t]}))},[ha]),_e=r.useCallback(t=>{ga(s=>({...s,[t]:!s[t]}))},[ga]),cl=r.useCallback(async t=>{await y.confirm(a("datainspector.custom_template_delete_confirm"))&&(await _.deleteSqlStatement(t.id),await $())},[$,a]),xl=r.useCallback(async t=>{const s=(await y.prompt(a("datainspector.rename_template_prompt"),{defaultValue:t.name}))?.trim();if(!s||s===t.name)return;const l=D.find(n=>n.id!==t.id&&n.name.toLowerCase()===s.toLowerCase()&&n.scope===t.scope);l&&!await y.confirm(a("datainspector.custom_template_overwrite_confirm",{name:s}))||(l&&await _.deleteSqlStatement(l.id),await _.saveSqlStatement({id:t.id,name:s,sql_text:t.sql_text,description:t.description,scope:t.scope,tags:t.tags,is_favorite:Number(t.is_favorite)===1}),await $())},[$,D,a]),fs=r.useCallback(()=>{if(!v||v.length===0)return;const t=new Date().toISOString().slice(0,10),s=v.map(l=>{const n={...l};return delete n._rowid,n});Ql(s,`export_${t}`,"Export")},[v]),ul=r.useCallback(()=>{const t=Ne.trim();t&&(Le(s=>({...s,[t]:Ct})),le(!0))},[le,Ne,Ct]),bl=r.useCallback(t=>{Le(s=>{const l={...s};return delete l[t],l})},[]),ml=r.useCallback(()=>{Le({}),We(""),le(!1),pa("")},[le]),pl=r.useCallback(()=>{const s=`SELECT * FROM "${i.replace(/"/g,'""')}" LIMIT 100`;if(w==="table"){W(s);return}V("sql"),P(s),Q(s.length),U("result"),ae(!1)},[w,W,i,ae]),ta=r.useCallback(t=>{Oe(t),ae(!0)},[ae,Oe]),ks=r.useCallback(t=>{const s=i.replace(/"/g,'""'),l=o=>`"${o.replace(/"/g,'""')}"`;return`SELECT ${t.length>0?t.map(l).join(", "):"*"}
FROM "${s}"
LIMIT 100`},[i]),hl=r.useCallback(async t=>{if(ce.length===0){await y.info(a("datainspector.table_tools_pick_fields_required","Select at least one field."));return}const s=ks(ce);if(w==="table"){W(s);return}V("sql"),P(s),Q(s.length),U("result"),ae(!1),t&&await ne(s)},[ks,ne,w,W,ae,ce,a]),gl=r.useCallback(async()=>{if(ce.length===0){await y.info(a("datainspector.table_tools_pick_fields_required","Select at least one field."));return}V("table"),ma(ce),ae(!1)},[ae,ce,a]),bt=r.useCallback((t,s)=>{let l=s,n=s;const o=x=>/[A-Za-z0-9_."]/i.test(x);for(;l>0&&o(t[l-1]);)l-=1;for(;n<t.length&&o(t[n]);)n+=1;const d=t.slice(l,s);return{start:l,end:n,token:d}},[]),B=F.useMemo(()=>{if(c!=="sql"||!M)return[];const t=(A||[]).map(h=>h.name),{token:s}=bt(S,ue),l=s.trim().toLowerCase(),n=S.slice(0,ue).toUpperCase(),o=/\b(FROM|JOIN|INTO|UPDATE|TABLE)\s+["A-Z0-9_]*$/i.test(n),d=/\b(SELECT|WHERE|AND|OR|ON|HAVING|BY|ORDER BY|GROUP BY)\s+["A-Z0-9_.,]*$/i.test(n),x=Gl.filter(h=>l.length===0||h.toLowerCase().startsWith(l)).map(h=>({label:h,insert:h,type:"keyword"})),m=(pe||[]).filter(h=>l.length===0||h.toLowerCase().startsWith(l)).map(h=>({label:h,insert:h,type:"table"})),p=t.filter(h=>l.length===0||h.toLowerCase().startsWith(l)).map(h=>({label:h,insert:h,type:"column"}));let k=[];return o?k=[...m,...x]:d||s.includes(".")?k=[...p,...x,...m]:k=[...x,...m,...p],k.filter((h,I,N)=>N.findIndex(oe=>oe.label===h.label&&oe.type===h.type)===I).slice(0,16)},[c,M,A,bt,S,ue,pe]);r.useEffect(()=>{ot(0),Ue(c==="sql"&&M&&B.length>0)},[c,M,B]),r.useEffect(()=>{M||Ue(!1)},[M]);const aa=r.useCallback(t=>{const{start:s,end:l}=bt(S,ue),n=`${S.slice(0,s)}${t.insert}${S.slice(l)}`,o=s+t.insert.length;P(n),Q(o),Ue(!1),ot(0),window.setTimeout(()=>{qe.current?.focus(),qe.current?.setSelectionRange(o,o)},0)},[bt,S,ue]),fl=r.useCallback(t=>{if(M){if(!Ee||B.length===0){t.key===" "&&t.ctrlKey&&(t.preventDefault(),Ue(!0));return}if(t.key==="ArrowDown"){t.preventDefault(),ot(s=>(s+1)%B.length);return}if(t.key==="ArrowUp"){t.preventDefault(),ot(s=>(s-1+B.length)%B.length);return}if(t.key==="Enter"||t.key==="Tab"){t.preventDefault(),aa(B[Pt]);return}t.key==="Escape"&&(t.preventDefault(),Ue(!1))}},[M,Ee,Pt,aa,B]),sa=r.useCallback(()=>{const t=qe.current;if(!t)return;const s=t.selectionStart??ue,l=window.getComputedStyle(t),n=document.createElement("div"),o=["boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontFamily","lineHeight","textAlign","textTransform","textIndent","letterSpacing","wordSpacing"];n.style.position="absolute",n.style.visibility="hidden",n.style.whiteSpace="pre-wrap",n.style.wordWrap="break-word",n.style.top="0",n.style.left="-9999px";for(const N of o)n.style[N]=l[N];n.style.width=`${t.clientWidth}px`,n.textContent=t.value.slice(0,s);const d=document.createElement("span");d.textContent=t.value.slice(s)||".",n.appendChild(d),document.body.appendChild(n);const x=Number.parseFloat(l.lineHeight),m=Number.isFinite(x)?x:18,p=d.offsetTop-t.scrollTop+m+6,k=d.offsetLeft-t.scrollLeft+8;document.body.removeChild(n);const T=Math.max(8,Math.min(p,t.clientHeight-44)),h=Math.max(8,Math.min(k,t.clientWidth-180)),I=Math.max(180,t.clientWidth-h-10);Os({top:T,left:h,width:Math.min(420,I)})},[ue]);r.useEffect(()=>{!Ee||B.length===0||sa()},[Ee,B.length,ue,S,sa]),r.useEffect(()=>{Ft(Pe)},[Pe]),r.useEffect(()=>{if(ge===Pe)return;const t=window.setTimeout(()=>{Da(ge)},180);return()=>window.clearTimeout(t)},[ge,Pe,Da]);const Re=F.useMemo(()=>{if(c!=="table"||!v||v.length===0)return[];const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,l=/^[A-Z]{2}\d{2}[A-Z0-9]{10,30}$/i,n=/^https?:\/\/[^\s/$.?#].[^\s]*$/i,o=x=>{if(!(/^\d{4}-\d{2}-\d{2}/.test(x)||/^\d{2}[./-]\d{2}[./-]\d{2,4}$/.test(x)))return!1;const p=Date.parse(x.replace(/\./g,"-"));return!Number.isNaN(p)};return Object.keys(v[0]).filter(x=>x!=="_rowid").map(x=>{const m=v.map(b=>b[x]),p=m.filter(b=>b!=null&&String(b).trim()!==""),k=m.length-p.length,T=m.length>0?k/m.length*100:0,h=p.map(b=>String(b).trim()),I=new Set(h).size,N=p.map(b=>typeof b=="number"?b:Number(b)).filter(b=>!Number.isNaN(b)),oe=N.length,$e=p.filter(b=>b instanceof Date||o(String(b).trim())).length;let u="unknown";if(p.length===0)u="unknown";else{const b=oe/p.length,he=$e/p.length;b>.9?u="number":he>.9?u="date":b>.1||he>.1?u="mixed":u="text"}const g=N.length>0?Math.min(...N):null,f=N.length>0?Math.max(...N):null,j={email:h.filter(b=>t.test(b)).length,uuid:h.filter(b=>s.test(b)).length,iban:h.filter(b=>l.test(b)).length,url:h.filter(b=>n.test(b)).length,date:h.filter(b=>o(b)).length},G=Object.entries(j).filter(([,b])=>b>=2&&b/Math.max(1,h.length)>=.2).sort((b,he)=>he[1]-b[1]).map(([b])=>b),ze=Object.entries(j).sort((b,he)=>he[1]-b[1])[0],_l=ze?ze[1]/Math.max(1,h.length):0;let Qe=0;u==="number"?Qe=Math.max(0,p.length-oe):u==="date"?Qe=Math.max(0,p.length-$e):ze&&ze[1]>=3&&_l>=.6&&(Qe=Math.max(0,p.length-ze[1]));const la=new Map;h.forEach(b=>{la.set(b,(la.get(b)||0)+1)});const wl=Array.from(la.entries()).sort((b,he)=>he[1]-b[1]).slice(0,3),Nl=p.length>0?I/p.length*100>ke.cardinalityRate:!1,Ge=[];return T>=ke.nullRate&&Ge.push("high_null"),u==="mixed"&&Ge.push("mixed_types"),Nl&&Ge.push("high_cardinality"),Qe>0&&Ge.push("suspicious_values"),{key:x,distinctCount:I,nullRate:T,min:g,max:f,topValues:wl,detectedType:u,patterns:G,suspiciousCount:Qe,issues:Ge}})},[c,v,ke]),kl=F.useMemo(()=>Re.reduce((t,s)=>t+s.issues.length,0),[Re]),vl=t=>{t.preventDefault(),t.stopPropagation(),Yt.current={startY:t.clientY,startHeight:ge},Kt.current=ge,Qa(!0)};return r.useEffect(()=>{if(!Gt)return;const t=l=>{const n=Yt.current;if(!n)return;const o=l.clientY-n.startY,d=120,x=Math.max(260,Math.floor(window.innerHeight*.62)),m=Math.max(d,Math.min(x,n.startHeight+o));Kt.current=m,qe.current&&(qe.current.style.height=`${m}px`)},s=()=>{const l=Math.round(Kt.current);Ps.current=Date.now(),Ft(l),Qa(!1),Yt.current=null};return document.body.style.cursor="row-resize",document.body.style.userSelect="none",document.body.style.overflowAnchor="none",window.addEventListener("mousemove",t),window.addEventListener("mouseup",s),()=>{document.body.style.cursor="",document.body.style.userSelect="",document.body.style.overflowAnchor="",window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",s)}},[Gt,Ft]),e.jsxs(Sl,{header:{title:Ws,subtitle:a("datainspector.subtitle",{count:c==="sql"&&se==="explain"?Se.length:c==="table"&&X==="profiling"?Re.length:v?.length||0,mode:c==="table"?i:a("datainspector.sql_mode")}),onBack:ht,actions:e.jsxs(e.Fragment,{children:[Ga&&e.jsxs("button",{onClick:()=>{kt(Ga.replace(/^#/,""))},className:"h-10 flex items-center gap-2 px-3 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-sm font-semibold rounded-lg border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-all",title:a("datainspector.back_to_dashboard"),children:[e.jsx(Hl,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:a("datainspector.back_to_dashboard")})]}),!Ya&&e.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-800 p-1 rounded-lg",children:[e.jsxs("button",{onClick:()=>{V("table"),H()},className:`px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 ${c==="table"?"bg-white dark:bg-slate-700 shadow text-blue-600 dark:text-blue-400":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(Bl,{className:"w-4 h-4"}),a("datainspector.table_mode")]}),e.jsxs("button",{onClick:()=>{V("sql"),U(xa?"explain":"result"),S||P(`SELECT * FROM ${i} LIMIT 10`)},className:`px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 ${c==="sql"?"bg-white dark:bg-slate-700 shadow text-blue-600 dark:text-blue-400":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(Vl,{className:"w-4 h-4"}),a("datainspector.sql_mode")]})]}),e.jsx("button",{onClick:H,className:"h-10 w-10 flex items-center justify-center bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 rounded-lg border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 hover:text-slate-700 dark:hover:text-slate-200 transition-all",title:a("datainspector.refresh_title"),children:e.jsx(Ae,{className:`w-4 h-4 ${ve?"animate-spin":""}`})}),e.jsxs("button",{onClick:fs,className:"h-10 flex items-center gap-2 px-4 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-sm font-semibold rounded-lg border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-all",children:[e.jsx(zl,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:a("datainspector.export_excel")})]})]})},rightPanel:{title:c==="table"?a("datainspector.table_tools","Table Tools"):a("datainspector.sql_assist","SQL Workspace"),enabled:c==="sql"||c==="table",triggerTitle:c==="table"?a("datainspector.table_tools","Table Tools"):a("datainspector.sql_assist","SQL Workspace"),width:"sm",isOpen:c==="table"?yt:Cs,onOpenChange:c==="table"?ae:ie,content:c==="table"?e.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-4",children:[e.jsxs("div",{className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 p-1 flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>Oe("columns"),className:`px-3 py-1 text-xs font-semibold rounded-md transition-colors ${de==="columns"?"bg-blue-600 text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:a("datainspector.table_tools_tab_columns","Columns")}),e.jsx("button",{type:"button",onClick:()=>Oe("filters"),className:`px-3 py-1 text-xs font-semibold rounded-md transition-colors ${de==="filters"?"bg-blue-600 text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:a("datainspector.table_tools_tab_filters","Filters")}),e.jsx("button",{type:"button",onClick:()=>Oe("actions"),className:`px-3 py-1 text-xs font-semibold rounded-md transition-colors ${de==="actions"?"bg-blue-600 text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:a("datainspector.table_tools_tab_actions","Actions")})]}),de==="columns"&&e.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-2",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:a("datainspector.table_tools_columns_hint","Inspect schema and set sorting per column.")}),e.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/40 p-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.table_tools_field_picker","Field Picker")}),e.jsx("span",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:a("datainspector.table_tools_selected_count",{count:ce.length,defaultValue:"{{count}} selected"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>Me((A||[]).map(t=>t.name)),className:"h-7 w-7 inline-flex items-center justify-center rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:a("datainspector.table_tools_select_all_fields","Select all"),"aria-label":a("datainspector.table_tools_select_all_fields","Select all"),children:e.jsx(Fl,{className:"w-3.5 h-3.5"})}),e.jsx("button",{type:"button",onClick:()=>Me([]),className:"h-7 w-7 inline-flex items-center justify-center rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:a("datainspector.table_tools_clear_field_selection","Clear"),"aria-label":a("datainspector.table_tools_clear_field_selection","Clear"),children:e.jsx(pt,{className:"w-3.5 h-3.5"})}),e.jsxs("button",{type:"button",onClick:()=>{hl(!1)},className:"h-7 px-2 inline-flex items-center gap-1 text-[11px] rounded border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:[e.jsx(Pl,{className:"w-3.5 h-3.5"}),a("datainspector.sql_assist","SQL Workspace")]}),e.jsx("button",{type:"button",onClick:()=>{gl()},className:"h-7 w-7 inline-flex items-center justify-center text-[11px] rounded border border-blue-200 bg-blue-600 hover:bg-blue-700 text-white",title:a("datainspector.table_tools_apply_to_table","Apply to Table"),"aria-label":a("datainspector.table_tools_apply_to_table","Apply to Table"),children:e.jsx(mt,{className:"w-3.5 h-3.5 fill-current"})})]})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-auto border border-slate-200 dark:border-slate-700 rounded-lg divide-y divide-slate-100 dark:divide-slate-700",children:(A||[]).length===0?e.jsx("div",{className:"p-3 text-xs text-slate-400 dark:text-slate-500",children:a("common.no_data")}):(A||[]).map(t=>{const s=L?.key===t.name,l=s?L?.direction:null,n=ce.includes(t.name);return e.jsx("div",{className:`p-3 space-y-2 ${s?"bg-blue-50/60 dark:bg-blue-900/20":""} ${n?"ring-1 ring-inset ring-blue-200 dark:ring-blue-700/60":""}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("label",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:()=>{Me(o=>o.includes(t.name)?o.filter(d=>d!==t.name):[...o,t.name])}}),e.jsxs("div",{className:"text-xs font-semibold text-slate-700 dark:text-slate-200 truncate flex items-center gap-2",children:[e.jsx("span",{className:"truncate",children:t.name}),s&&e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-[10px] font-bold",children:l==="asc"?"ASC":"DESC"})]})]}),e.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500",children:t.type||"-"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>Be({key:t.name,direction:"asc"}),className:`h-7 px-2 text-[11px] rounded border ${s&&l==="asc"?"border-blue-300 dark:border-blue-800 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300"}`,title:a("datainspector.table_tools_sort_asc","Sort ascending"),children:"ASC"}),e.jsx("button",{type:"button",onClick:()=>Be({key:t.name,direction:"desc"}),className:`h-7 px-2 text-[11px] rounded border ${s&&l==="desc"?"border-blue-300 dark:border-blue-800 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300"}`,title:a("datainspector.table_tools_sort_desc","Sort descending"),children:"DESC"})]})]})},t.name)})})]}),de==="filters"&&e.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-3",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:a("datainspector.table_tools_filters_hint","Manage global search and column filters.")}),e.jsx("label",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.table_tools_global_search","Global Search")}),e.jsx("input",{type:"text",value:fe,onChange:t=>We(t.target.value),placeholder:a("datainspector.search_placeholder"),className:"w-full h-9 px-3 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-sm text-slate-700 dark:text-slate-200 outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 items-end",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.table_tools_column","Column")}),e.jsx("select",{value:Ne,onChange:t=>St(t.target.value),className:"w-full h-9 px-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-sm text-slate-700 dark:text-slate-200 outline-none",children:(A||[]).map(t=>e.jsx("option",{value:t.name,children:t.name},t.name))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.table_tools_filter_value","Filter")}),e.jsx("input",{type:"text",value:Ct,onChange:t=>pa(t.target.value),className:"w-full h-9 px-3 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-sm text-slate-700 dark:text-slate-200 outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{type:"button",onClick:ul,className:"h-9 px-3 rounded-lg border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-xs font-semibold hover:bg-blue-100 dark:hover:bg-blue-900/30",children:a("datainspector.table_tools_filter_apply","Apply")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[e.jsx("input",{type:"checkbox",checked:Vt,onChange:t=>le(t.target.checked)}),a("datainspector.table_tools_toggle_filter_row","Show filter row in table")]}),e.jsx("button",{type:"button",onClick:ml,className:"text-[11px] text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200",children:a("datainspector.table_tools_clear_all","Clear all")})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-auto border border-slate-200 dark:border-slate-700 rounded-lg divide-y divide-slate-100 dark:divide-slate-700",children:Object.keys(me).length===0?e.jsx("div",{className:"p-3 text-xs text-slate-400 dark:text-slate-500",children:a("datainspector.table_tools_no_filters","No active column filters")}):Object.entries(me).map(([t,s])=>e.jsxs("div",{className:"p-3 flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-700 dark:text-slate-200 truncate",children:t}),e.jsx("div",{className:"text-[11px] text-slate-500 dark:text-slate-400 truncate",children:s||"-"})]}),e.jsx("button",{type:"button",onClick:()=>bl(t),className:"h-7 px-2 text-[11px] rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",children:a("common.remove","Remove")})]},t))})]}),de==="actions"&&e.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-3",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:a("datainspector.table_tools_actions_hint","Quick actions for current table context.")}),e.jsx("button",{type:"button",onClick:()=>H(),className:"h-9 px-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-xs font-semibold hover:bg-slate-50 dark:hover:bg-slate-700 text-left",children:a("common.refresh","Refresh")}),e.jsx("button",{type:"button",onClick:fs,className:"h-9 px-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-xs font-semibold hover:bg-slate-50 dark:hover:bg-slate-700 text-left",children:a("datainspector.table_tools_export_rows","Export current rows")}),e.jsx("button",{type:"button",onClick:pl,className:"h-9 px-3 rounded-lg border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-xs font-semibold hover:bg-blue-100 dark:hover:bg-blue-900/30 text-left",children:a("datainspector.table_tools_open_sql","Open as SQL")}),e.jsx("button",{type:"button",onClick:Za,className:"h-9 px-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-xs font-semibold hover:bg-slate-50 dark:hover:bg-slate-700 text-left",children:a(re?"datainspector.update_view":"datainspector.save_view")}),e.jsx("button",{type:"button",onClick:()=>{es()},disabled:!re,className:"h-9 px-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-xs font-semibold hover:bg-slate-50 dark:hover:bg-slate-700 text-left disabled:opacity-40",children:a("datainspector.delete_view")}),ee==="table"&&e.jsx("button",{type:"button",onClick:ts,className:"h-9 px-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-xs font-semibold hover:bg-slate-50 dark:hover:bg-slate-700 text-left",children:a("datainspector.table_tools_create_index","Create index")}),ee==="table"&&e.jsxs("div",{className:"mt-1 pt-3 border-t border-slate-200 dark:border-slate-700 min-h-0 flex-1 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.index_suggestions_title","Index Suggestions")}),e.jsx("button",{type:"button",onClick:()=>{Zs()},disabled:$a,className:"h-7 px-2 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 text-[11px] disabled:opacity-40",children:$a?a("common.loading","Loading..."):a("datainspector.index_suggestions_generate","Generate")})]}),e.jsx("div",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:a("datainspector.index_suggestions_hint","Based on active filters, sorting, cardinality and existing indexes.")}),e.jsx("div",{className:"min-h-0 flex-1 overflow-auto border border-slate-200 dark:border-slate-700 rounded-lg divide-y divide-slate-100 dark:divide-slate-700",children:Ra.length===0?e.jsx("div",{className:"p-3 text-xs text-slate-400 dark:text-slate-500",children:a("datainspector.index_suggestions_empty","No suggestions yet. Generate to analyze this table.")}):Ra.map(t=>e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-700 dark:text-slate-200",children:t.indexName}),e.jsx("div",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:t.reason}),e.jsxs("div",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:[a("datainspector.index_suggestions_columns","Columns"),": ",e.jsx("span",{className:"font-mono",children:t.columns.join(", ")})]}),e.jsx("div",{className:"font-mono text-[10px] text-slate-400 dark:text-slate-500 break-all",children:t.sql}),e.jsx("button",{type:"button",onClick:()=>{el(t)},disabled:Oa===t.id,className:"h-7 px-2 rounded border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-[11px] disabled:opacity-40",children:Oa===t.id?a("common.saving","Saving..."):a("datainspector.index_suggestions_apply","Create")})]},t.id))})]})]})]}):e.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-4",children:[e.jsxs("div",{className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 p-1 flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>ba("manager"),className:`px-3 py-1 text-xs font-semibold rounded-md transition-colors ${jt==="manager"?"bg-blue-600 text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:a("datainspector.sql_manager_tab","SQL Manager")}),e.jsx("button",{type:"button",onClick:()=>ba("assistant"),className:`px-3 py-1 text-xs font-semibold rounded-md transition-colors ${jt==="assistant"?"bg-blue-600 text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:a("datainspector.assistant_tab","SQL Builder")})]}),jt==="manager"?e.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-3 overflow-hidden",children:[e.jsxs("div",{className:K.templates?"min-h-0 flex-[0.9] flex flex-col gap-2":"flex-shrink-0",children:[e.jsxs("button",{type:"button",onClick:()=>ea("templates"),className:"flex items-center justify-between text-left",children:[e.jsx("span",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.templates")}),e.jsx(te,{className:`w-4 h-4 text-slate-400 dark:text-slate-500 transition-transform ${K.templates?"rotate-180":""}`})]}),K.templates&&e.jsx("div",{className:"flex-1 min-h-0 overflow-auto border border-slate-200 dark:border-slate-700 rounded-lg divide-y divide-slate-100 dark:divide-slate-700",children:os.map(t=>e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-700 dark:text-slate-200",children:a(`datainspector.template_${t.key}`)}),e.jsx("div",{className:"font-mono text-[10px] text-slate-400 dark:text-slate-500 truncate",children:t.sql}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx("button",{type:"button",onClick:()=>{gs(t.sql,!1)},className:"h-7 w-7 inline-flex items-center justify-center rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:a("common.open","Open"),"aria-label":a("common.open","Open"),children:e.jsx(ia,{className:"w-3.5 h-3.5"})}),e.jsx("button",{type:"button",onClick:()=>{gs(t.sql,!0)},className:"h-7 w-7 inline-flex items-center justify-center rounded border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300",title:a("datainspector.run_sql"),"aria-label":a("datainspector.run_sql"),children:e.jsx(mt,{className:"w-3.5 h-3.5"})})]})]},t.key))})]}),e.jsxs("div",{className:K.manager?"min-h-0 flex-[1.3] flex flex-col gap-2":"flex-shrink-0",children:[e.jsxs("button",{type:"button",onClick:()=>ea("manager"),className:"flex items-center justify-between text-left",children:[e.jsxs("span",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:[a("datainspector.sql_manager_tab","SQL Manager")," (",D.length,")"]}),e.jsx(te,{className:`w-4 h-4 text-slate-400 dark:text-slate-500 transition-transform ${K.manager?"rotate-180":""}`})]}),K.manager&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:Nt,onChange:t=>Ts(t.target.value),placeholder:a("datainspector.sql_manager_search_placeholder","Search patterns..."),className:"w-full h-9 px-3 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-sm text-slate-700 dark:text-slate-200 outline-none focus:ring-2 focus:ring-blue-500 flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-h-0 overflow-auto border border-slate-200 dark:border-slate-700 rounded-lg divide-y divide-slate-100 dark:divide-slate-700",children:ps.length===0?e.jsx("div",{className:"p-4 text-xs text-slate-400 dark:text-slate-500",children:a("datainspector.sql_manager_no_results","No matches")}):ps.map(t=>e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs font-semibold text-slate-700 dark:text-slate-200 flex items-center gap-2",children:[t.name,Number(t.is_favorite)===1&&e.jsx(da,{className:"w-3.5 h-3.5 text-amber-500 fill-current"})]}),e.jsx("div",{className:"font-mono text-[10px] text-slate-400 dark:text-slate-500 truncate",children:t.sql_text})]})}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx("button",{type:"button",onClick:()=>{hs(t,!1)},className:"h-7 w-7 inline-flex items-center justify-center rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:a("common.open","Open"),"aria-label":a("common.open","Open"),children:e.jsx(ia,{className:"w-3.5 h-3.5"})}),e.jsx("button",{type:"button",onClick:()=>{hs(t,!0)},className:"h-7 w-7 inline-flex items-center justify-center rounded border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300",title:a("datainspector.run_sql"),"aria-label":a("datainspector.run_sql"),children:e.jsx(mt,{className:"w-3.5 h-3.5"})}),e.jsx("button",{type:"button",onClick:()=>{_.setSqlStatementFavorite(t.id,Number(t.is_favorite)!==1).then($)},className:"h-7 w-7 inline-flex items-center justify-center rounded border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-700 dark:text-amber-300",title:Number(t.is_favorite)===1?a("datainspector.unpin"):a("datainspector.pin"),"aria-label":Number(t.is_favorite)===1?a("datainspector.unpin"):a("datainspector.pin"),children:e.jsx(da,{className:`w-3.5 h-3.5 ${Number(t.is_favorite)===1?"fill-current":""}`})}),e.jsx("button",{type:"button",onClick:()=>{xl(t)},className:"px-2 py-1 text-[11px] rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:a("datainspector.rename_template"),children:e.jsx(Ul,{className:"w-3 h-3"})}),e.jsx("button",{type:"button",onClick:()=>{cl(t)},className:"px-2 py-1 text-[11px] rounded border border-rose-200 dark:border-rose-800 bg-rose-50 dark:bg-rose-900/20 hover:bg-rose-100 dark:hover:bg-rose-900/30 text-rose-700 dark:text-rose-300",title:a("datainspector.delete_template"),children:e.jsx(Wl,{className:"w-3 h-3"})})]})]},t.id))})]})]}),e.jsxs("div",{className:K.recent?"min-h-0 flex-[0.8] flex flex-col gap-2":"flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{type:"button",onClick:()=>ea("recent"),className:"flex items-center justify-between gap-2 text-left flex-1",children:[e.jsx("span",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.recent_queries")}),e.jsx(te,{className:`w-4 h-4 text-slate-400 dark:text-slate-500 transition-transform ${K.recent?"rotate-180":""}`})]}),K.recent&&e.jsx("button",{type:"button",onClick:()=>_t([]),className:"text-[11px] text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200",children:a("datainspector.clear_history")})]}),K.recent&&e.jsx("div",{className:"flex-1 min-h-0 overflow-auto border border-slate-200 dark:border-slate-700 rounded-lg divide-y divide-slate-100 dark:divide-slate-700",children:ca.length===0?e.jsx("div",{className:"p-3 text-xs text-slate-400 dark:text-slate-500",children:a("common.no_data")}):ca.map((t,s)=>e.jsx("button",{type:"button",onClick:()=>P(t),className:"w-full text-left p-3 hover:bg-slate-50 dark:hover:bg-slate-700/60",children:e.jsx("div",{className:"font-mono text-[11px] text-slate-600 dark:text-slate-300 truncate",children:t})},`${s}-${t.slice(0,16)}`))})]})]}):e.jsxs("div",{className:"h-full min-h-0 flex flex-col",children:[e.jsxs("div",{className:"flex-1 min-h-0 overflow-auto pr-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:a("datainspector.assistant_hint","Build SQL by selecting table, columns and optional aggregation.")}),e.jsxs("button",{type:"button",onClick:sl,className:"inline-flex items-center gap-1 px-2 py-1 rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-[11px] hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx(pt,{className:"w-3 h-3"}),a("datainspector.assistant_reset","Reset")]})]}),e.jsxs("div",{className:"space-y-1 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/40 dark:bg-slate-900/40 px-2 py-2",children:[e.jsxs("button",{type:"button",onClick:()=>_e("table"),className:"w-full flex items-center justify-between text-left rounded-md px-1 py-1 hover:bg-slate-100/70 dark:hover:bg-slate-800/70",children:[e.jsx("span",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.assistant_table","Table")}),e.jsx(te,{className:`w-4 h-4 text-slate-400 dark:text-slate-500 transition-transform ${R.table?"rotate-180":""}`})]}),R.table&&e.jsx("select",{value:J,onChange:t=>fa(t.target.value),className:"w-full h-9 px-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-sm text-slate-700 dark:text-slate-200 outline-none focus:ring-2 focus:ring-blue-500",children:pe.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"space-y-1 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/40 dark:bg-slate-900/40 px-2 py-2",children:[e.jsxs("button",{type:"button",onClick:()=>_e("columns"),className:"w-full flex items-center justify-between text-left rounded-md px-1 py-1 hover:bg-slate-100/70 dark:hover:bg-slate-800/70",children:[e.jsx("span",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.assistant_columns","Columns")}),e.jsx(te,{className:`w-4 h-4 text-slate-400 dark:text-slate-500 transition-transform ${R.columns?"rotate-180":""}`})]}),R.columns&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>De(q),className:"text-[11px] text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200",children:a("datainspector.assistant_select_all","Select all")}),e.jsx("button",{type:"button",onClick:()=>De([]),className:"text-[11px] text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200",children:a("datainspector.assistant_clear_all","Clear")})]}),e.jsx("input",{type:"text",value:Tt,onChange:t=>_a(t.target.value),placeholder:a("datainspector.assistant_column_search_placeholder","Search columns..."),className:"w-full h-8 px-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-xs text-slate-700 dark:text-slate-200 outline-none"}),e.jsxs("div",{className:"max-h-28 overflow-auto border border-slate-200 dark:border-slate-700 rounded-lg p-2 space-y-1",children:[is.map(t=>e.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[e.jsx("input",{type:"checkbox",checked:Ze.includes(t),onChange:()=>{De(s=>s.includes(t)?s.filter(l=>l!==t):[...s,t])},className:"h-4 w-4 rounded border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-blue-600 dark:text-blue-400 accent-blue-600 dark:accent-blue-500 focus:ring-blue-500/50"}),e.jsx("span",{className:"font-mono",children:t})]},t)),is.length===0&&e.jsx("p",{className:"text-[11px] text-slate-400 dark:text-slate-500 px-1 py-0.5",children:a("datainspector.sql_manager_no_results","No matches")})]})]})]}),e.jsxs("div",{className:"space-y-1 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/40 dark:bg-slate-900/40 px-2 py-2",children:[e.jsxs("button",{type:"button",onClick:()=>_e("aggregation"),className:"w-full flex items-center justify-between text-left rounded-md px-1 py-1 hover:bg-slate-100/70 dark:hover:bg-slate-800/70",children:[e.jsx("span",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.assistant_aggregation","Aggregation")}),e.jsx(te,{className:`w-4 h-4 text-slate-400 dark:text-slate-500 transition-transform ${R.aggregation?"rotate-180":""}`})]}),R.aggregation&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.assistant_aggregation_function","Function")}),e.jsxs("select",{value:E,onChange:t=>Na(t.target.value),className:"w-full h-9 px-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-sm text-slate-700 dark:text-slate-200 outline-none",children:[e.jsx("option",{value:"none",children:a("datainspector.assistant_none","None")}),e.jsx("option",{value:"count",children:"COUNT"}),e.jsx("option",{value:"sum",children:"SUM"}),e.jsx("option",{value:"avg",children:"AVG"}),e.jsx("option",{value:"min",children:"MIN"}),e.jsx("option",{value:"max",children:"MAX"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.assistant_aggregation_field","Aggregation Field")}),e.jsxs("select",{value:xe,disabled:E==="none"||E==="count",onChange:t=>Fe(t.target.value),className:"w-full h-9 px-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-sm text-slate-700 dark:text-slate-200 outline-none disabled:opacity-40",children:[e.jsx("option",{value:"",children:"-"}),q.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]})})]}),e.jsxs("div",{className:"space-y-1 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/40 dark:bg-slate-900/40 px-2 py-2",children:[e.jsxs("button",{type:"button",onClick:()=>_e("grouping"),disabled:!ds,className:"w-full flex items-center justify-between text-left rounded-md px-1 py-1 hover:bg-slate-100/70 dark:hover:bg-slate-800/70 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.assistant_group_by","Group by")}),e.jsx(te,{className:`w-4 h-4 text-slate-400 dark:text-slate-500 transition-transform ${R.grouping?"rotate-180":""}`})]}),ds?R.grouping&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.assistant_grouping_columns","Grouping Columns")}),e.jsx("div",{className:"max-h-20 overflow-auto border border-slate-200 dark:border-slate-700 rounded-lg p-2 space-y-1",children:q.map(t=>e.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[e.jsx("input",{type:"checkbox",checked:Lt.includes(t),onChange:()=>{Rt(s=>s.includes(t)?s.filter(l=>l!==t):[...s,t])},className:"h-4 w-4 rounded border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-blue-600 dark:text-blue-400 accent-blue-600 dark:accent-blue-500 focus:ring-blue-500/50"}),e.jsx("span",{className:"font-mono",children:t})]},t))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.assistant_metric_alias","Metric Alias")}),e.jsx("input",{type:"text",value:z,onChange:t=>ja(t.target.value),className:"w-full h-9 px-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-sm text-slate-700 dark:text-slate-200 outline-none"})]})]}):e.jsx("p",{className:"text-[11px] text-slate-400 dark:text-slate-500 px-1 py-1",children:a("datainspector.assistant_grouping_requires_aggregation","Enable aggregation to configure grouping.")})]}),e.jsxs("div",{className:"space-y-1 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/40 dark:bg-slate-900/40 px-2 py-2",children:[e.jsxs("button",{type:"button",onClick:()=>_e("filter"),className:"w-full flex items-center justify-between text-left rounded-md px-1 py-1 hover:bg-slate-100/70 dark:hover:bg-slate-800/70",children:[e.jsx("span",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.assistant_filter","Filter")}),e.jsx(te,{className:`w-4 h-4 text-slate-400 dark:text-slate-500 transition-transform ${R.filter?"rotate-180":""}`})]}),R.filter&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs("button",{type:"button",onClick:ll,className:"h-7 px-2 inline-flex items-center gap-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-[11px] hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx(Ns,{className:"w-3 h-3"}),a("datainspector.assistant_add_filter","Add filter")]})}),e.jsx("div",{className:"space-y-2",children:et.map((t,s)=>e.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-700 p-2 bg-white/60 dark:bg-slate-900/40 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-[70px_minmax(0,1fr)] gap-2",children:[s>0?e.jsxs("select",{value:t.connector,onChange:l=>xt(t.id,{connector:l.target.value}),className:"h-9 px-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-xs text-slate-700 dark:text-slate-200 outline-none",children:[e.jsx("option",{value:"AND",children:"AND"}),e.jsx("option",{value:"OR",children:"OR"})]}):e.jsx("div",{className:"h-9 flex items-center text-[11px] font-semibold text-slate-400 dark:text-slate-500 px-1",children:"WHERE"}),e.jsxs("select",{value:t.column,onChange:l=>xt(t.id,{column:l.target.value}),className:"h-9 px-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-sm text-slate-700 dark:text-slate-200 outline-none",children:[e.jsx("option",{value:"",children:a("datainspector.assistant_sort_field","Field")}),q.map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{className:"grid grid-cols-[110px_minmax(0,1fr)_auto] gap-2",children:[e.jsxs("select",{value:t.operator,onChange:l=>xt(t.id,{operator:l.target.value}),className:"h-9 px-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-sm text-slate-700 dark:text-slate-200 outline-none",children:[e.jsx("option",{value:"=",children:"="}),e.jsx("option",{value:"!=",children:"!="}),e.jsx("option",{value:">",children:">"}),e.jsx("option",{value:">=",children:">="}),e.jsx("option",{value:"<",children:"<"}),e.jsx("option",{value:"<=",children:"<="}),e.jsx("option",{value:"LIKE",children:"LIKE"}),e.jsx("option",{value:"NOT LIKE",children:"NOT LIKE"}),e.jsx("option",{value:"IS NULL",children:"IS NULL"}),e.jsx("option",{value:"IS NOT NULL",children:"IS NOT NULL"})]}),e.jsx("input",{type:"text",value:t.value,onChange:l=>xt(t.id,{value:l.target.value}),placeholder:a("datainspector.assistant_filter_value","Value"),disabled:t.operator==="IS NULL"||t.operator==="IS NOT NULL",className:"h-9 px-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-sm text-slate-700 dark:text-slate-200 outline-none disabled:opacity-40"}),e.jsxs("div",{className:"h-9 flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>cs(t.id,"up"),disabled:s===0,className:"h-9 w-7 inline-flex items-center justify-center rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-40",title:a("common.move_up","Move up"),children:e.jsx(js,{className:"w-3.5 h-3.5"})}),e.jsx("button",{type:"button",onClick:()=>cs(t.id,"down"),disabled:s===et.length-1,className:"h-9 w-7 inline-flex items-center justify-center rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-40",title:a("common.move_down","Move down"),children:e.jsx(ys,{className:"w-3.5 h-3.5"})}),e.jsx("button",{type:"button",onClick:()=>rl(t.id),className:"h-9 w-7 inline-flex items-center justify-center rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700",title:a("datainspector.assistant_clear_all","Clear"),children:e.jsx(pt,{className:"w-3.5 h-3.5"})})]})]})]},t.id))}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("label",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.assistant_where","WHERE")}),e.jsxs("select",{value:Et,onChange:t=>va(t.target.value),className:"h-7 px-2 border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900 text-[11px] text-slate-700 dark:text-slate-200 outline-none",title:a("datainspector.assistant_where_connector","Join with filters"),children:[e.jsx("option",{value:"AND",children:"AND"}),e.jsx("option",{value:"OR",children:"OR"})]})]}),e.jsx("input",{type:"text",value:qt,onChange:t=>ka(t.target.value),placeholder:a("datainspector.assistant_where_placeholder","status = 'active'"),className:"w-full h-9 px-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-sm text-slate-700 dark:text-slate-200 outline-none"})]})]})]}),e.jsxs("div",{className:"space-y-1 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/40 dark:bg-slate-900/40 px-2 py-2",children:[e.jsxs("button",{type:"button",onClick:()=>_e("sorting"),className:"w-full flex items-center justify-between text-left rounded-md px-1 py-1 hover:bg-slate-100/70 dark:hover:bg-slate-800/70",children:[e.jsx("span",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.assistant_order_by","Order by")}),e.jsx(te,{className:`w-4 h-4 text-slate-400 dark:text-slate-500 transition-transform ${R.sorting?"rotate-180":""}`})]}),R.sorting&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs("button",{type:"button",onClick:nl,className:"h-7 px-2 inline-flex items-center gap-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-[11px] hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx(Ns,{className:"w-3 h-3"}),a("datainspector.assistant_add_sort","Add sort")]})}),e.jsx("div",{className:"space-y-2",children:tt.map((t,s)=>e.jsxs("div",{className:"grid grid-cols-[minmax(0,1fr)_110px_auto] gap-2",children:[e.jsxs("select",{value:t.column,onChange:l=>xs(t.id,{column:l.target.value}),className:"h-9 px-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-sm text-slate-700 dark:text-slate-200 outline-none",children:[e.jsx("option",{value:"",children:a("datainspector.assistant_auto","Auto")}),E!=="none"&&e.jsx("option",{value:z||"metric_value",children:z||"metric_value"}),q.map(l=>e.jsx("option",{value:l,children:l},l))]}),e.jsxs("select",{value:t.direction,onChange:l=>xs(t.id,{direction:l.target.value}),className:"h-9 px-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-sm text-slate-700 dark:text-slate-200 outline-none",children:[e.jsx("option",{value:"DESC",children:"DESC"}),e.jsx("option",{value:"ASC",children:"ASC"})]}),e.jsxs("div",{className:"h-9 flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>us(t.id,"up"),disabled:s===0,className:"h-9 w-7 inline-flex items-center justify-center rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-40",title:a("common.move_up","Move up"),children:e.jsx(js,{className:"w-3.5 h-3.5"})}),e.jsx("button",{type:"button",onClick:()=>us(t.id,"down"),disabled:s===tt.length-1,className:"h-9 w-7 inline-flex items-center justify-center rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-40",title:a("common.move_down","Move down"),children:e.jsx(ys,{className:"w-3.5 h-3.5"})}),e.jsx("button",{type:"button",onClick:()=>ol(t.id),className:"h-9 w-7 inline-flex items-center justify-center rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700",title:a("datainspector.assistant_clear_all","Clear"),children:e.jsx(pt,{className:"w-3.5 h-3.5"})})]})]},t.id))}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.assistant_limit","Limit")}),e.jsx("input",{type:"number",min:1,max:1e5,value:It,onChange:t=>wa(Number(t.target.value)),className:"w-full h-9 px-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-sm text-slate-700 dark:text-slate-200 outline-none"})]})]})]}),e.jsxs("div",{className:"space-y-1 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/40 dark:bg-slate-900/40 px-2 py-2",children:[e.jsxs("button",{type:"button",onClick:()=>_e("preview"),className:"w-full flex items-center justify-between text-left rounded-md px-1 py-1 hover:bg-slate-100/70 dark:hover:bg-slate-800/70",children:[e.jsx("span",{className:"text-[11px] uppercase tracking-wider font-bold text-slate-500 dark:text-slate-400",children:a("datainspector.assistant_generated_sql","Generated SQL")}),e.jsx(te,{className:`w-4 h-4 text-slate-400 dark:text-slate-500 transition-transform ${R.preview?"rotate-180":""}`})]}),R.preview&&e.jsx("textarea",{readOnly:!0,value:Zt,className:"w-full h-32 p-2 font-mono text-xs border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-900 text-slate-700 dark:text-slate-200"})]})]}),e.jsx("div",{className:"mt-3 -mx-5 -mb-5 px-5 py-3 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-950/90",children:e.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{bs("replace")},className:"px-3 py-1.5 rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-xs hover:bg-slate-50 dark:hover:bg-slate-700",children:a("datainspector.assistant_replace_editor","Replace Editor")}),e.jsx("button",{type:"button",onClick:()=>{bs("run")},className:"px-3 py-1.5 rounded-md border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-xs hover:bg-blue-100 dark:hover:bg-blue-900/30",children:a("datainspector.run_sql")})]})})]})]})},footer:al,breadcrumbs:[{label:Hs}],fillHeight:!0,children:[e.jsx("div",{className:"fixed top-0 left-0 w-full h-[3px] bg-blue-100 dark:bg-blue-900/30 z-[100] overflow-hidden",children:ve&&e.jsx("div",{className:"h-full bg-blue-600 dark:bg-blue-400 animate-pulse",style:{width:"40%"}})}),c==="table"?e.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex-shrink-0",children:e.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(220px,320px)_minmax(280px,1fr)_auto] gap-3",children:[e.jsxs("div",{className:"relative min-w-0",children:[e.jsx("select",{value:i,onChange:t=>{Wt(t.target.value),We(""),Be(null),Le({}),le(!1),it(""),Ie(1)},className:"w-full h-10 appearance-none pl-10 pr-10 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer text-sm font-medium",children:Ve?.map(t=>e.jsx("option",{value:t.name,children:t.type==="view"?`${t.name} (view)`:t.name},t.name))}),e.jsx(_s,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-2 h-2 border-r-2 border-b-2 border-slate-400 rotate-45 pointer-events-none"})]}),e.jsxs("div",{className:"relative min-w-0",children:[e.jsx("input",{type:"text",placeholder:a("datainspector.search_placeholder"),value:fe,onChange:t=>{We(t.target.value),Ie(1)},className:"w-full h-10 pl-10 pr-4 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"})]}),e.jsxs("button",{onClick:()=>H(),className:"h-10 px-3 flex items-center justify-center gap-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 text-sm font-medium",title:a("datainspector.refresh_title"),children:[e.jsx(Ae,{className:`w-4 h-4 ${ve?"animate-spin":""}`}),e.jsx("span",{children:a("common.refresh","Refresh")})]})]})})}):e.jsxs("div",{className:"flex flex-col gap-2 bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm ring-1 ring-slate-900/5 flex-shrink-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{ref:qe,value:S,onChange:t=>{P(t.target.value),U("explain"),Q(t.target.selectionStart??t.target.value.length)},onClick:t=>Q(t.currentTarget.selectionStart??0),onKeyUp:t=>Q(t.currentTarget.selectionStart??0),onSelect:t=>Q(t.currentTarget.selectionStart??0),onScroll:()=>{M&&Ee&&sa()},onKeyDown:fl,placeholder:a("datainspector.sql_placeholder"),className:"w-full p-4 font-mono text-sm bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none text-slate-800 dark:text-slate-200 min-h-[120px] max-h-[520px]",style:{height:`${ge}px`}}),M&&Ee&&B.length>0&&e.jsx("div",{className:"absolute z-20 border border-slate-200 dark:border-slate-700 rounded-lg bg-white/95 dark:bg-slate-900/95 backdrop-blur shadow-lg max-h-40 overflow-auto",style:{top:Ut.top,left:Ut.left,width:Ut.width},children:B.slice(0,10).map((t,s)=>e.jsxs("button",{type:"button",onClick:()=>aa(t),className:`w-full text-left px-3 py-1.5 text-xs font-mono border-b last:border-b-0 border-slate-100 dark:border-slate-800 transition-colors ${s===Pt?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-300"}`,children:[e.jsx("span",{className:"font-bold",children:t.label}),e.jsx("span",{className:"ml-2 hidden sm:inline text-[10px] uppercase tracking-wide text-slate-400",children:t.type})]},`${t.type}-${t.label}`))}),e.jsxs("div",{className:"absolute bottom-4 right-4 flex gap-2",children:[e.jsx("button",{onClick:()=>P(""),className:"px-3 py-1 text-xs text-slate-500 hover:text-slate-700 dark:hover:text-slate-300",children:a("datainspector.clear_sql")}),e.jsxs("button",{onClick:()=>{zs()},className:"flex items-center gap-2 px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium shadow-sm transition-colors",children:[ve?e.jsx(Ae,{className:"w-3 h-3 animate-spin"}):e.jsx(mt,{className:"w-3 h-3 fill-current"}),a("datainspector.run_sql")]}),ve&&e.jsx("button",{onClick:()=>{Qs()},className:"px-3 py-1.5 rounded-md text-sm font-medium border bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700",children:a("datainspector.stop_sql","Stop")}),e.jsx("button",{onClick:()=>qs(!M),className:`px-3 py-1.5 rounded-md text-sm font-medium border transition-colors ${M?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-300":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,title:a("datainspector.autocomplete_toggle_title","Toggle SQL autocomplete"),children:M?a("datainspector.autocomplete_on","Autocomplete on"):a("datainspector.autocomplete_off","Autocomplete off")}),e.jsx("button",{onClick:()=>ie(!0),className:"h-9 w-9 flex items-center justify-center rounded-md border bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700",title:a("datainspector.sql_assist","SQL Workspace"),"aria-label":a("datainspector.sql_assist","SQL Workspace"),children:e.jsx(ia,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:Ys,className:"flex items-center gap-1 px-3 py-1.5 rounded-md text-sm font-medium border bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700",title:a("common.save","Save"),children:[e.jsx(Rl,{className:"w-3.5 h-3.5"}),a("common.save","Save")]}),e.jsxs("button",{onClick:()=>{Gs(S)},className:`flex items-center gap-1 px-3 py-1.5 rounded-md text-sm font-medium border transition-colors ${ut?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800 text-amber-700 dark:text-amber-300":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,title:a(ut?"datainspector.unpin_query":"datainspector.pin_query"),children:[e.jsx(da,{className:`w-3.5 h-3.5 ${ut?"fill-current":""}`}),a(ut?"datainspector.unpin":"datainspector.pin")]})]})]}),Sa&&e.jsx("div",{className:"mt-2 px-3 py-2 text-xs rounded-md border border-amber-200 dark:border-amber-800/60 bg-amber-50 dark:bg-amber-900/20 text-amber-800 dark:text-amber-200",children:Sa}),e.jsxs("div",{className:"px-3 py-2 text-[11px] rounded-md border border-slate-200 dark:border-slate-700 bg-slate-50/70 dark:bg-slate-900/40 text-slate-500 dark:text-slate-400",children:[a("datainspector.sql_assist","SQL Workspace"),":"," ",os.length," ",a("datainspector.templates")," ","|"," ",dl," ",a("datainspector.favorite_queries")," ","|"," ",D.length," ",a("datainspector.custom_templates")]})]}),c==="sql"&&e.jsx("div",{onMouseDown:vl,className:`h-3 -mt-2 -mb-1 flex items-center justify-center cursor-row-resize ${Gt?"opacity-100":"opacity-70 hover:opacity-100"}`,title:a("datainspector.resize_sql_split","Resize SQL and results panes"),children:e.jsx("div",{className:"h-1 w-12 rounded-full bg-slate-300 dark:bg-slate-600"})}),e.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden flex flex-col min-h-0 relative",children:[ve&&v&&v.length>0&&!(c==="sql"&&se==="explain")&&e.jsx("div",{className:"absolute inset-0 bg-white/40 dark:bg-slate-800/40 z-10 flex items-center justify-center backdrop-blur-[1px]",children:e.jsx("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-full shadow-xl border border-slate-100 dark:border-slate-700",children:e.jsx(Ae,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 animate-spin"})})}),c==="sql"&&e.jsxs("div",{className:"px-4 py-2 border-b border-slate-100 dark:border-slate-700 bg-slate-50/60 dark:bg-slate-900/30 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-1",children:[e.jsx("button",{onClick:()=>U("result"),className:`px-3 py-1 text-xs font-semibold rounded-md transition-colors ${se==="result"?"bg-blue-600 text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-300 dark:hover:text-slate-100"}`,children:a("datainspector.output_results","Results")}),e.jsx("button",{onClick:()=>{U("explain")},className:`px-3 py-1 text-xs font-semibold rounded-md transition-colors ${se==="explain"?"bg-indigo-600 text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-300 dark:hover:text-slate-100"}`,children:a("datainspector.output_explain","Explain")})]}),e.jsx("span",{className:"text-[11px] text-slate-400",children:a("datainspector.explain_hint")})]}),c==="table"&&e.jsxs("div",{className:"px-4 py-2 border-b border-slate-100 dark:border-slate-700 bg-slate-50/60 dark:bg-slate-900/30 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-1",children:[e.jsx("button",{onClick:()=>za("data"),className:`px-3 py-1 text-xs font-semibold rounded-md transition-colors ${X==="data"?"bg-blue-600 text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-300 dark:hover:text-slate-100"}`,children:a("datainspector.result_tab_data","Data")}),e.jsx("button",{onClick:()=>za("profiling"),className:`px-3 py-1 text-xs font-semibold rounded-md transition-colors ${X==="profiling"?"bg-indigo-600 text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-300 dark:hover:text-slate-100"}`,children:a("datainspector.result_tab_profile","Profiling")})]}),e.jsx("span",{className:"text-[11px] text-slate-400",children:X==="profiling"?a("datainspector.profiling_issues",{count:kl}):a("datainspector.auto_limit",{limit:Te})})]}),c==="table"&&X==="profiling"&&e.jsxs("div",{className:"px-4 py-2 border-b border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800 flex items-center justify-between gap-3 text-[11px]",children:[e.jsx("div",{className:"font-semibold uppercase tracking-wider text-slate-500",children:a("datainspector.profiling_settings","Profiling Settings")}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400",children:[e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("span",{children:a("datainspector.null_threshold")}),e.jsx("input",{type:"number",min:0,max:100,value:ke.nullRate,onChange:t=>{const s=Number(t.target.value);Number.isNaN(s)||Qt({...ke,nullRate:Math.max(0,Math.min(100,s))})},className:"w-14 px-1.5 py-0.5 border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900 text-slate-700 dark:text-slate-200"}),e.jsx("span",{children:"%"})]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("span",{children:a("datainspector.cardinality_threshold")}),e.jsx("input",{type:"number",min:0,max:100,value:ke.cardinalityRate,onChange:t=>{const s=Number(t.target.value);Number.isNaN(s)||Qt({...ke,cardinalityRate:Math.max(0,Math.min(100,s))})},className:"w-14 px-1.5 py-0.5 border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-900 text-slate-700 dark:text-slate-200"}),e.jsx("span",{children:"%"})]}),e.jsx("button",{onClick:()=>Qt({nullRate:30,cardinalityRate:95}),className:"px-2 py-0.5 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700",children:a("datainspector.reset_thresholds")})]})]}),c==="table"&&X==="data"&&e.jsxs("div",{className:"px-4 py-2 border-b border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800 flex items-center justify-between gap-3 text-[11px]",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("button",{onClick:()=>ta("columns"),className:"h-7 w-7 inline-flex items-center justify-center rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:a("datainspector.table_tools_tab_columns","Columns"),"aria-label":a("datainspector.table_tools_tab_columns","Columns"),children:e.jsx($l,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>ta("filters"),className:"h-7 w-7 inline-flex items-center justify-center rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:a("datainspector.table_tools_tab_filters","Filters"),"aria-label":a("datainspector.table_tools_tab_filters","Filters"),children:e.jsx(Al,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>ta("actions"),className:"h-7 w-7 inline-flex items-center justify-center rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:a("datainspector.table_tools_tab_actions","Actions"),"aria-label":a("datainspector.table_tools_tab_actions","Actions"),children:e.jsx(Ol,{className:"w-3.5 h-3.5"})}),e.jsxs("button",{onClick:ts,disabled:ee!=="table",className:"h-7 px-2 text-[11px] rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 disabled:opacity-40 flex items-center gap-1",title:ee!=="table"?a("datasource.view_type","VIEW"):a("datasource.create_index_title","Create index"),children:[e.jsx(Ml,{className:"w-3.5 h-3.5"}),a("datasource.create_index_btn","Create index")]})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold uppercase tracking-wider",children:a("datainspector.saved_views","Saved Views")}),e.jsxs("select",{value:re,onChange:t=>{const s=t.target.value;if(it(s),!s)return;const l=zt.find(n=>n.id===s);l&&Ks(l)},className:"h-7 px-2 border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-[11px] outline-none min-w-[180px]",children:[e.jsx("option",{value:"",children:a("datainspector.select_view")}),zt.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("button",{onClick:Za,className:"h-7 px-2 text-[11px] rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",children:a(re?"datainspector.update_view":"datainspector.save_view")}),e.jsx("button",{onClick:es,disabled:!re,className:"h-7 px-2 text-[11px] rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-300 disabled:opacity-40",children:a("datainspector.delete_view")})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden flex flex-col relative min-h-0",children:c==="sql"&&se==="explain"?Rs?e.jsxs("div",{className:"flex-1 flex items-center justify-center p-6 text-xs text-slate-400 gap-2",children:[e.jsx(Ae,{className:"w-3.5 h-3.5 animate-spin"}),a("common.loading")]}):ya?e.jsx("div",{className:"flex-1 p-4 text-xs text-rose-600",children:ya}):Se.length===0?e.jsx("div",{className:"flex-1 p-4 text-xs text-slate-400",children:a("datainspector.explain_empty")}):e.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar",children:e.jsxs("table",{className:"w-full text-xs min-w-[520px]",children:[e.jsx("thead",{className:"sticky top-0 bg-slate-50 dark:bg-slate-900 text-slate-400 uppercase text-[10px] z-[1]",children:e.jsx("tr",{children:Object.keys(Se[0]).map(t=>e.jsx("th",{className:"text-left px-2 py-1.5",children:t},t))})}),e.jsx("tbody",{children:Se.map((t,s)=>e.jsx("tr",{className:"border-t border-slate-100 dark:border-slate-700",children:Object.keys(Se[0]).map(l=>e.jsx("td",{className:"px-2 py-1.5 text-slate-600 dark:text-slate-300",children:String(t[l]??"")},l))},s))})]})}):c==="table"&&X==="profiling"?Re.length===0?e.jsx("div",{className:"flex-1 p-4 text-xs text-slate-400",children:a("datainspector.no_profile")}):e.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar",children:e.jsxs("table",{className:"w-full text-xs min-w-[760px]",children:[e.jsx("thead",{className:"text-slate-400 uppercase text-[10px] sticky top-0 bg-slate-50 dark:bg-slate-900 z-[1]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-1.5 px-2",children:a("querybuilder.value")}),e.jsx("th",{className:"text-left py-1.5 px-2",children:a("datainspector.type")}),e.jsx("th",{className:"text-left py-1.5 px-2",children:a("datainspector.distinct_values")}),e.jsx("th",{className:"text-left py-1.5 px-2",children:a("datainspector.null_rate")}),e.jsx("th",{className:"text-left py-1.5 px-2",children:a("datainspector.min")}),e.jsx("th",{className:"text-left py-1.5 px-2",children:a("datainspector.max")}),e.jsx("th",{className:"text-left py-1.5 px-2",children:a("datainspector.top_values")}),e.jsx("th",{className:"text-left py-1.5 px-2",children:a("datainspector.patterns")}),e.jsx("th",{className:"text-left py-1.5 px-2",children:a("datainspector.suspicious_values")}),e.jsx("th",{className:"text-left py-1.5 px-2",children:a("datainspector.issues")})]})}),e.jsx("tbody",{children:Re.map(t=>e.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700",children:[e.jsx("td",{className:"py-1.5 px-2 font-semibold text-slate-700 dark:text-slate-200",children:t.key}),e.jsx("td",{className:"py-1.5 px-2 text-slate-600 dark:text-slate-300",children:a(`datainspector.type_${t.detectedType}`)}),e.jsx("td",{className:"py-1.5 px-2 text-slate-600 dark:text-slate-300",children:t.distinctCount}),e.jsxs("td",{className:"py-1.5 px-2 text-slate-600 dark:text-slate-300",children:[t.nullRate.toFixed(1),"%"]}),e.jsx("td",{className:"py-1.5 px-2 text-slate-600 dark:text-slate-300",children:t.min??"-"}),e.jsx("td",{className:"py-1.5 px-2 text-slate-600 dark:text-slate-300",children:t.max??"-"}),e.jsx("td",{className:"py-1.5 px-2 text-slate-600 dark:text-slate-300 truncate max-w-[260px]",title:t.topValues.map(s=>`${s[0]} (${s[1]})`).join(", "),children:t.topValues.length>0?t.topValues.map(s=>`${s[0]} (${s[1]})`).join(", "):"-"}),e.jsx("td",{className:"py-1.5 px-2",children:t.patterns.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:t.patterns.map(s=>e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-indigo-50 text-indigo-700 border border-indigo-200 text-[10px] font-semibold",children:a(`datainspector.pattern_${s}`)},s))}):e.jsx("span",{className:"text-slate-400",children:"-"})}),e.jsx("td",{className:"py-1.5 px-2 text-slate-600 dark:text-slate-300",children:t.suspiciousCount}),e.jsx("td",{className:"py-1.5 px-2",children:t.issues.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:t.issues.map(s=>e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-amber-50 text-amber-700 border border-amber-200 text-[10px] font-semibold",children:a(`datainspector.issue_${s}`)},s))}):e.jsx("span",{className:"text-slate-400",children:"-"})})]},t.key))})]})}):ve&&!v?e.jsx("div",{className:"flex-1 flex items-center justify-center p-12 text-center text-slate-400 animate-pulse",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(ws,{className:"w-12 h-12 opacity-20"}),e.jsx("p",{className:"text-lg",children:a("common.loading")})]})}):e.jsx(Tl,{data:v||[],columns:tl,searchTerm:"",emptyMessage:a(c==="sql"&&!S?"datainspector.empty_sql":"common.no_data"),onRowClick:t=>Pa(t),sortConfig:c==="table"?L:void 0,onSortConfigChange:c==="table"?Be:void 0,filters:c==="table"?me:void 0,onFiltersChange:c==="table"?Le:void 0,showFilters:c==="table"?Vt:void 0,onShowFiltersChange:c==="table"?le:void 0,columnWidths:c==="table"?Bs:void 0,onColumnWidthsChange:c==="table"?Vs:void 0})}),e.jsxs("div",{className:"px-4 py-2 border-t border-slate-100 dark:border-slate-700 text-[10px] flex justify-between items-center text-slate-400 bg-slate-50/50 dark:bg-slate-900/50",children:[e.jsx("div",{className:"font-medium",children:c==="table"?X==="profiling"?a("datainspector.result_tab_profile","Profiling"):e.jsx("select",{value:String(Te),onChange:t=>{Ms(Number(t.target.value)),Ie(1)},className:"h-7 px-2 border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-[10px] outline-none",title:a("datainspector.page_size"),children:[50,100,250,500].map(t=>e.jsx("option",{value:t,children:a("datainspector.page_size_value",{size:t})},t))}):se==="explain"?a("datainspector.output_explain","Explain"):a("datainspector.sql_mode")}),e.jsxs("div",{className:"flex items-center gap-4",children:[c==="table"&&X==="data"&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("button",{onClick:()=>Ie(t=>Math.max(1,t-1)),disabled:He<=1,className:"px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-300 disabled:opacity-40",children:a("datainspector.prev_page")}),e.jsx("span",{className:"text-[10px] font-semibold text-slate-500 dark:text-slate-300",children:a("datainspector.page_info",{page:He,pages:dt,total:Ja||0})}),e.jsx("button",{onClick:()=>Ie(t=>t+1),disabled:He>=dt,className:"px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-300 disabled:opacity-40",children:a("datainspector.next_page")}),e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[e.jsx("input",{type:"number",min:1,max:dt,value:Ua,onChange:t=>Wa(t.target.value),placeholder:a("datainspector.page_number_placeholder"),className:"w-16 px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-[10px] outline-none"}),e.jsx("button",{onClick:()=>{const t=Number(Ua);if(Number.isNaN(t))return;const s=Math.max(1,Math.min(dt,Math.floor(t)));Ie(s),Wa("")},className:"px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-300 text-[10px]",children:a("datainspector.go")})]})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_s,{className:"w-3 h-3"})," LiteBI Studio DB"]}),e.jsx("span",{className:"font-medium",children:a("common.results_count",{count:c==="sql"&&se==="explain"?Se.length:c==="table"&&X==="profiling"?Re.length:v?.length||0})})]})]})]}),e.jsx(Il,{isOpen:!!Ht,onClose:()=>Pa(null),items:v||[],initialIndex:v&&Ht?Math.max(0,v.indexOf(Ht)):0,title:a("common.details"),tableName:i,schema:void 0}),e.jsx(Cl,{isOpen:As,onClose:()=>{rt||lt(!1)},title:a("datasource.create_index_title","Create index"),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-xs text-slate-500",children:[a("datasource.index_create_for_table","Table"),": ",e.jsx("span",{className:"font-mono font-semibold text-slate-700",children:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:a("datasource.index_name","Index name")}),e.jsx("input",{type:"text",value:qa,onChange:t=>Ea(t.target.value),className:"w-full p-2 border border-slate-200 rounded-lg bg-white outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:`idx_${i}_...`})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx("input",{type:"checkbox",checked:Mt,onChange:()=>Ta(!Mt),className:"h-4 w-4"}),a("datasource.index_unique","Unique index")]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase",children:a("datasource.index_columns","Columns")}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-40 overflow-auto border border-slate-200 rounded p-2 bg-slate-50",children:(A||[]).map(t=>e.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx("input",{type:"checkbox",checked:Ce.includes(t.name),onChange:()=>Js(t.name),className:"h-4 w-4"}),e.jsx("span",{className:"font-mono",children:t.name})]},t.name))})]}),Ce.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase",children:a("datasource.index_order","Column order")}),e.jsx("div",{className:"space-y-1 border border-slate-200 rounded p-2 bg-white",children:Ce.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"font-mono text-slate-700",children:[s+1,". ",t]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>as(t,"up"),disabled:s===0,className:"px-2 py-0.5 text-xs border border-slate-200 rounded disabled:opacity-40",children:""}),e.jsx("button",{type:"button",onClick:()=>as(t,"down"),disabled:s===Ce.length-1,className:"px-2 py-0.5 text-xs border border-slate-200 rounded disabled:opacity-40",children:""})]})]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:a("datasource.index_where_optional","WHERE (optional)")}),e.jsx("input",{type:"text",value:Dt,onChange:t=>Ia(t.target.value),className:"w-full p-2 border border-slate-200 rounded-lg bg-white outline-none focus:ring-2 focus:ring-blue-500 text-sm font-mono",placeholder:"status = 'open'"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:()=>lt(!1),disabled:rt,className:"px-3 py-1.5 rounded border border-slate-200 text-slate-600 text-sm hover:bg-slate-50 disabled:opacity-40",children:a("common.cancel","Cancel")}),e.jsx("button",{onClick:()=>{Xs()},disabled:rt,className:"px-4 py-1.5 rounded bg-indigo-600 text-white text-sm font-semibold hover:bg-indigo-700 disabled:opacity-40",children:rt?a("common.saving","Saving..."):a("datasource.create_index_btn","Create index")})]})]})}),Ka&&e.jsxs("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 bg-red-100 dark:bg-red-900/50 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-200 px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 animate-in slide-in-from-bottom-2 fade-in",children:[e.jsx(Dl,{className:"w-5 h-5 shrink-0"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-sm font-bold",children:a("datainspector.sql_error")}),e.jsx("p",{className:"text-xs opacity-90",children:String(Ka)})]}),e.jsx("button",{onClick:H,className:"ml-auto p-1.5 hover:bg-red-200 dark:hover:bg-red-800 rounded-md transition-colors",children:e.jsx(Ae,{className:"w-4 h-4"})})]})]})};export{or as DataInspector};
