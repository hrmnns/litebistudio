import{a as X,j as r}from"./index-CXLGbupS.js";import{d as i,r as _}from"./vendor-react-D64xOC9_.js";import{a4 as re,X as ae,g as ne}from"./vendor-icons-Du2dXQHa.js";function ce({data:L,columns:c,searchTerm:g="",searchFields:F=[],emptyMessage:z="No items found",onRowClick:m,sortConfig:b,onSortConfigChange:I,filters:v,onFiltersChange:P,showFilters:y,onShowFiltersChange:O,columnWidths:p,onColumnWidthsChange:M}){const j=i.useRef(null),k=i.useRef(null),w=i.useRef(null),[A,B]=i.useState(null),[V,q]=i.useState({}),[G,K]=i.useState(!1),[U,H]=i.useState({}),[N]=X("ui_table_density","normal"),[J]=X("ui_table_wrap_cells",!1),o=b!==void 0?b:A,d=v!==void 0?v:V,S=y!==void 0?y:G,h=p!==void 0?p:U,Q=e=>{b===void 0&&B(e),I?.(e)},T=e=>{v===void 0&&q(e),P?.(e)},Y=e=>{y===void 0&&K(e),O?.(e)},R=i.useCallback(e=>{p===void 0&&H(e),M?.(e)},[p,M]),x=e=>typeof e.accessor=="string"?e.accessor:e.header,Z=e=>{if(!e)return null;const t=/^(\d+)px$/i.exec(e.trim());return t?Number(t[1]):null},C=e=>{const t=x(e);if(h[t])return Math.max(90,h[t]);const s=Z(e.width);return s?Math.max(90,s):150},f=_.useCallback((e,t)=>e[t],[]),E=_.useMemo(()=>{let e=L;if(g){const t=g.toLowerCase();e=e.filter(s=>F.some(n=>{const a=s[n];return String(a??"").toLowerCase().includes(t)}))}return Object.keys(d).length>0&&(e=e.filter(t=>Object.entries(d).every(([s,n])=>{if(!n)return!0;const a=c.find(u=>(typeof u.accessor=="string"?u.accessor:u.header)===s);if(!a)return!0;let l;return typeof a.accessor=="function"?l=a.accessor(t):l=f(t,a.accessor),String(l??"").toLowerCase().includes(n.toLowerCase())}))),o&&(e=[...e].sort((t,s)=>{const n=c.find($=>$.accessor===o.key||typeof $.accessor=="string"&&$.accessor===o.key);let a,l;if(n&&typeof n.accessor=="function"?(a=n.accessor(t),l=n.accessor(s)):(a=f(t,o.key),l=f(s,o.key)),a===l)return 0;if(a==null)return 1;if(l==null)return-1;const u=a<l?-1:1;return o.direction==="asc"?u:-u})),e},[L,g,F,o,c,d,f]),ee=()=>{j.current&&k.current&&(j.current.scrollLeft=k.current.scrollLeft)},te=(e,t)=>{e.preventDefault(),e.stopPropagation(),w.current={key:x(t),startX:e.clientX,startWidth:C(t)}};i.useEffect(()=>{const e=s=>{const n=w.current;if(!n)return;const a=Math.max(90,Math.min(900,n.startWidth+(s.clientX-n.startX)));h[n.key]!==a&&R({...h,[n.key]:a})},t=()=>{w.current=null};return window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[h,R]);const se=e=>{const t=x(e);let s="asc";o&&o.key===t&&o.direction==="asc"&&(s="desc"),Q({key:t,direction:s})},D=(e,t)=>{T({...d,[e]:t})},W=()=>r.jsx("colgroup",{children:c.map((e,t)=>r.jsx("col",{style:{width:`${C(e)}px`,minWidth:`${C(e)}px`}},t))});return r.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden h-full relative border rounded-lg border-slate-300 dark:border-slate-700",children:[r.jsx("div",{ref:j,className:"overflow-hidden flex-none bg-slate-50 dark:bg-slate-900 border-b border-slate-300 dark:border-slate-700",children:r.jsxs("table",{className:"w-full text-sm text-left table-fixed",children:[W(),r.jsxs("thead",{className:"text-[10px] text-slate-400 uppercase font-bold text-left",children:[r.jsx("tr",{children:c.map((e,t)=>{const s=x(e),n=o?.key===s;return r.jsxs("th",{className:`relative px-4 ${N==="compact"?"py-2":"py-3"} truncate cursor-pointer select-none hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors ${e.align==="right"?"text-right":e.align==="center"?"text-center":"text-left"} ${e.className||""}`,title:e.header,onClick:()=>se(e),children:[r.jsxs("div",{className:`flex items-center gap-1.5 ${e.align==="right"?"justify-end":e.align==="center"?"justify-center":"justify-start"}`,children:[t===0&&r.jsx("button",{onClick:a=>{a.stopPropagation(),Y(!S)},className:`p-1 rounded hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors mr-2 ${S||Object.keys(d).length>0?"text-blue-600 bg-blue-100 dark:bg-blue-900/40":"text-slate-500 hover:text-slate-700"}`,title:"Toggle Column Filters",children:r.jsx(re,{className:"w-4 h-4"})}),r.jsx("span",{className:"truncate",children:e.header}),n&&r.jsx("span",{className:"text-blue-500 text-[9px]",children:o?.direction==="asc"?"▲":"▼"})]}),r.jsx("div",{className:"absolute top-0 right-0 h-full w-2 cursor-col-resize group",onMouseDown:a=>te(a,e),role:"separator","aria-orientation":"vertical","aria-label":`Resize ${e.header}`,children:r.jsx("div",{className:"mx-auto h-full w-px bg-slate-300 dark:bg-slate-700 opacity-0 group-hover:opacity-100"})})]},t)})}),S&&r.jsx("tr",{className:"bg-slate-100/50 dark:bg-slate-800/50",children:c.map((e,t)=>{const s=typeof e.accessor=="string"?e.accessor:e.header;return r.jsx("th",{className:`px-2 ${N==="compact"?"py-0.5":"py-1"}`,children:r.jsxs("div",{className:"relative flex items-center",children:[r.jsx("input",{type:"text",value:d[s]||"",onChange:n=>D(s,n.target.value),onClick:n=>n.stopPropagation(),placeholder:`Filter ${e.header}...`,className:"w-full px-2 py-1 text-[10px] font-normal border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-900 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-1 focus:ring-blue-500 placeholder:text-slate-300"}),d[s]&&r.jsx("button",{onClick:n=>{n.stopPropagation(),D(s,"")},className:"absolute right-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:r.jsx(ae,{className:"w-3 h-3"})})]})},t)})})]})]})}),r.jsx("div",{ref:k,onScroll:ee,className:"flex-1 overflow-auto bg-white dark:bg-slate-800",children:r.jsxs("table",{className:"w-full text-sm text-left table-fixed",children:[W(),r.jsxs("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[E.map((e,t)=>r.jsx("tr",{onClick:()=>m&&m(e),className:`transition-colors group ${m?"cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20":"hover:bg-slate-50 dark:hover:bg-slate-700/30"}`,children:c.map((s,n)=>{const a=typeof s.accessor=="function"?s.accessor(e):f(e,s.accessor),l=s.render?s.render(e):typeof a=="string"||typeof a=="number"?a:a==null?"":String(a);return r.jsx("td",{className:`px-4 ${N==="compact"?"py-2":"py-3"} ${J?"whitespace-normal break-words":"truncate"} ${s.align==="right"?"text-right":s.align==="center"?"text-center":"text-left"} ${s.className||""}`,title:typeof a=="string"?a:void 0,children:l},n)})},t)),E.length===0&&r.jsx("tr",{children:r.jsxs("td",{colSpan:c.length,className:"px-6 py-20 text-center text-slate-400",children:[r.jsx(ne,{className:"w-12 h-12 mx-auto mb-4 opacity-10"}),r.jsx("p",{className:"text-lg",children:z})]})})]})]})})]})}export{ce as D};
